!function(r){"use strict";function u(e,t,n){var s=new Date;s.setTime(s.getTime()+864e5*n),document.cookie=e+"="+t+";path=/;expires="+s.toGMTString()}function l(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function d(e,t,n,s,a){"undefined"!=typeof ga&&(void 0===a?ga("send",e,t,n,s):ga("send",e,t,n,s,a))}function m(e){var n="",t=r("."+e).attr("class").split(/\s+/);return r.each(t,function(e,t){if(0<t.indexOf("message-id"))return n=t.substring(t.lastIndexOf("-")+1),!1}),n}function f(e,t,n,s){n.focus(),r("."+e).removeClass(t),d("event","Popup",s,m(e),{nonInteraction:1})}function i(t,e,n,s,a){var o,i,c=document.activeElement;r("."+t+" .m-wp-insert-message-item").append('<a href="#" class="sm-close-btn" aria-label="Close"><i class="fas fa-times" aria-hidden="true"></i></a>'),"true"===l(n)||r("."+t).hasClass(a)||(o=t,i=s,u(n,"true",e),0<r(".validated").length?r("."+o+".validated").addClass(i):r("."+o+":first").addClass(i),d("event","Popup","Show",m(o),{nonInteraction:1})),r("."+t).on("click",".message-login",function(){d("event","Popup","Login Link",r(this).attr("href"))}),document.addEventListener("click",function(e){!r(e.target).closest("."+t).is("."+t)&&r("."+t).hasClass(s)&&f(t,s,c,"Click Elsewhere")},!0),r("."+t).on("click",".sm-close-btn",function(e){e.preventDefault(),f(t,s,c,"Close Button")}),r(document).keyup(function(e){27===e.keyCode&&f(t,s,c,"Escape Key")}),r("."+t).on("click","a:not( .sm-close-btn, .message-login )",function(){d("event","Popup","Click",m(t))})}r(document).ready(function(){var n="wp-message-inserter-message-popup",s="sm-shown",e="check-session-message",t=(parseInt(r("."+n).data("close-time-days"))||0)+(parseInt(r("."+n).data("close-time-hours"))||0)/24,a={gt:function(e,t){return t<=e},lt:function(e,t){return e<=t}},o=function(){var e=l("count"),t=Math.floor((new Date).getTime()/1e3);l("count")?t>l("timecheck")&&(u("timecheck",t+3600,30),u("count",++e,30)):(u("count",1,30),u("timecheck",t+3600,30));var n=new URLSearchParams(window.location.search);return null!==n.get("count")&&(e=parseInt(n.get("count"))),e}();0<r("."+e).length&&r("."+e).each(function(){var e=parseInt(r(this).data("session-count-to-check")),t=r(this).data("session-count-operator");a[t](o,e)&&(r(this).hasClass(n)&&l(s)||r(this).addClass("validated"))}),0<r("."+n).length&&i(n,t,s,"wp-message-inserter-message-popup-visible")})}(jQuery);