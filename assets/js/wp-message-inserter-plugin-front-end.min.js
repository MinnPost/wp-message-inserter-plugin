"use strict";function setCookie(e,t,n){var s=new Date;s.setTime(s.getTime()+864e5*n),document.cookie=e+"="+t+";path=/;expires="+s.toGMTString()}function getCookie(e){e=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return e?e[2]:null}function analyticsTrackingEvent(e,t,n,s,o,i){"undefined"!=typeof wp&&(t="Site Message: "+t.charAt(0).toUpperCase()+t.slice(1),wp.hooks.doAction("wpMessageInserterAnalyticsEvent",e,t,n,s,o,i))}function setCurrentCount(){var e=getCookie("count"),t=Math.floor((new Date).getTime()/1e3),t=(getCookie("count")?t>getCookie("timecheck")&&(setCookie("timecheck",t+3600,30),setCookie("count",++e,30)):(setCookie("count",1,30),setCookie("timecheck",t+3600,30)),new URLSearchParams(window.location.search));return e=null!==t.get("count")?parseInt(t.get("count")):e}function getPostId(e){var t=0;return e.classList.forEach(function(e){if(0<e.indexOf("message-id"))return t=e.substring(e.lastIndexOf("-")+1)}),t}function getMessageRegion(e){var t="";return e.classList.forEach(function(e){if(0<e.indexOf("message-region"))return t=e.substring(e.lastIndexOf("-")+1)}),t}function showPopup(e,t,n,s,o){setCookie(n,"true",t);n=document.querySelectorAll("."+o);0<n.length?n.forEach(function(e){e.classList.add(s)}):e.classList.add(s)}function hidePopup(e,t,n,s){n.focus(),e.classList.remove(t);n=getPostId(e);0!==n&&analyticsTrackingEvent("event","Popup",s,n,void 0,1)}function popupDisplay(n,e,t,s,o,i){var a=document.activeElement;"true"===getCookie(t)||n.classList.contains(o)&&!n.classList.contains(i)||(showPopup(n,e,t,s,i),messageAnalytics(n),n.addEventListener("click",function(e){!0===e.target.classList.contains("sm-close-btn")&&(e.preventDefault(),hidePopup(n,s,a,"Close Button"))},!0),document.addEventListener("click",function(e){var t=e.target;do{if(t===n)return}while(t=t.parentNode);hidePopup(n,s,a,"Click Outside to Close")}),document.onkeydown=function(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&hidePopup(n,s,a,"Escape Key")})}function messageAnalytics(e){var n=getMessageRegion(e),s=getPostId(e);"none"!==window.getComputedStyle(e,null).display&&(analyticsTrackingEvent("event",n,"Show",s,void 0,1),e.addEventListener("click",function(e){var t=e.target.classList.contains("message-login"),e=e.target.classList.contains("sm-close-btn");!0===t?(t=$(this).attr("href"),analyticsTrackingEvent("event",n,"Login Link",t)):!1===e&&analyticsTrackingEvent("event",n,"Click",s)},!0))}document.addEventListener("DOMContentLoaded",function(){var s,o,i="wp-message-inserter-message-region-popup",a="sm-shown",e="check-session-message",c="validated",t=document.querySelectorAll("."+e),t=(0<t.length&&(s=setCurrentCount(),o={gt:function(e,t){return t<=e},lt:function(e,t){return e<=t}},t.forEach(function(e){var t=parseInt(e.dataset.sessionCountToCheck),n=e.dataset.sessionCountOperator;o[n](s,t)&&(!e.classList.contains(i)&&getCookie(a)||e.classList.add(c))})),document.querySelector("."+i)),t=(null!==t&&popupDisplay(t,(parseInt(t.dataset.closeTimeDays)||0)+(parseInt(t.dataset.closeTimeHours)||0)/24,a,"wp-message-inserter-message-popup-visible",e,c),document.querySelectorAll(".wp-message-inserter-message:not( ."+i+" )"));0<t.length&&t.forEach(function(e){messageAnalytics(e)})});