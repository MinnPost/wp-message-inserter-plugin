"use strict";function setCookie(e,t,n){const s=new Date;s.setTime(s.getTime()+864e5*n),document.cookie=e+"="+t+";path=/;expires="+s.toGMTString()}function getCookie(e){e=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return e?e[2]:null}function analyticsTrackingEvent(e,t,n,s,o,i){"undefined"!=typeof wp&&(t="Site Message: "+t.charAt(0).toUpperCase()+t.slice(1),wp.hooks.doAction("wpMessageInserterAnalyticsEvent",e,t,n,s,o,i))}function dataLayerEvent(e,t){"undefined"!=typeof wp&&wp.hooks.doAction("wpMessageInserterDataLayerEvent",{parentMessageRegion:e,parentMessageId:t})}function setCurrentCount(){let e=getCookie("count");var t=Math.floor((new Date).getTime()/1e3);getCookie("count")?t>getCookie("timecheck")&&(setCookie("timecheck",t+3600,30),setCookie("count",++e,30)):(setCookie("count",1,30),setCookie("timecheck",t+3600,30));const n=new URLSearchParams(window.location.search);return e=null!==n.get("count")?parseInt(n.get("count")):e}function getPostId(e){let t=0;return e.classList.forEach(function(e){if(0<e.indexOf("message-id"))return t=e.substring(e.lastIndexOf("-")+1)}),t}function getMessageRegion(e){let t="";return e.classList.forEach(function(e){if(0<e.indexOf("message-region"))return t=e.substring(e.lastIndexOf("-")+1)}),t}function showPopup(e,t,n,s,o){setCookie(n,"true",t);const i=document.querySelectorAll("."+o);0<i.length?i.forEach(function(e){e.classList.add(s)}):e.classList.add(s)}function hidePopup(e,t,n,s){n.focus(),e.classList.remove(t);n=getPostId(e),t="Popup";0!==n&&(analyticsTrackingEvent("event",t,s,n,void 0,1),dataLayerEvent(t,n))}function popupDisplay(n,e,t,s,o,i){const a=document.activeElement;"true"===getCookie(t)||n.classList.contains(o)&&!n.classList.contains(i)||(showPopup(n,e,t,s,i),messageAnalytics(n),n.addEventListener("click",function(e){!0===e.target.classList.contains("sm-close-btn")&&(e.preventDefault(),hidePopup(n,s,a,"Close Button"))},!0),document.addEventListener("click",e=>{let t=e.target;do{if(t===n)return}while(t=t.parentNode);hidePopup(n,s,a,"Click Outside to Close")}),document.onkeydown=function(e){e=e||window.event;let t=!1;(t="key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&hidePopup(n,s,a,"Escape Key")})}function messageAnalytics(e){const n=getMessageRegion(e),s=getPostId(e);"none"!==window.getComputedStyle(e,null).display&&(analyticsTrackingEvent("event",n,"Show",s,void 0,1),e.addEventListener("click",function(e){var t=e.target.classList.contains("message-login"),e=e.target.classList.contains("sm-close-btn");!0===t?(t=$(this).attr("href"),analyticsTrackingEvent("event",n,"Login Link",t),dataLayerEvent(n,s)):!1===e&&(analyticsTrackingEvent("event",n,"Click",s),dataLayerEvent(n,s))},!0))}document.addEventListener("DOMContentLoaded",function(){const s="wp-message-inserter-message-region-popup",o="sm-shown";var e="check-session-message";const i="validated",t=document.querySelectorAll("."+e);if(0<t.length){const c=setCurrentCount(),r={gt(e,t){return t<=e},lt(e,t){return e<=t}};t.forEach(function(e){var t=parseInt(e.dataset.sessionCountToCheck),n=e.dataset.sessionCountOperator;r[n](c,t)&&(!e.classList.contains(s)&&getCookie(o)||e.classList.add(i))})}var n=document.querySelector("."+s);null!==n&&popupDisplay(n,(parseInt(n.dataset.closeTimeDays)||0)+(parseInt(n.dataset.closeTimeHours)||0)/24,o,"wp-message-inserter-message-popup-visible",e,i);const a=document.querySelectorAll(".wp-message-inserter-message:not( ."+s+" )");0<a.length&&a.forEach(function(e){messageAnalytics(e)})});