!function(u){"use strict";function l(e,t,n){var s=new Date;s.setTime(s.getTime()+864e5*n),document.cookie=e+"="+t+";path=/;expires="+s.toGMTString()}function d(e){e=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return e?e[2]:null}function r(e,t,n,s,o){t="Site Message: "+t.charAt(0).toUpperCase()+t.slice(1),"undefined"!=typeof ga&&(void 0===o?ga("send",e,t,n,s):ga("send",e,t,n,s,o))}function g(e){var n=0,e=u("."+e).attr("class").split(/\s+/);return u.each(e,function(e,t){if(0<t.indexOf("message-id"))return n=t.substring(t.lastIndexOf("-")+1),!1}),n}function f(e,t,n,s){n.focus(),u("."+e).removeClass(t);e=g(e);0!==e&&r("event","Popup",s,e,{nonInteraction:1})}function m(t,e,n,s,o){var i,a,c=document.activeElement;"true"===d(n)||u("."+t).hasClass(o)||(i=t,a=s,o=0,l(n,"true",e),0!==(o=0<u(".validated").length?(u("."+i+".validated").addClass(a),g(i+".validated")):(u("."+i+":first").addClass(a),g(i+":first")))&&r("event","Popup","Show",o,{nonInteraction:1})),u("."+t).on("click",".message-login",function(){r("event","Popup","Login Link",u(this).attr("href"))}),document.addEventListener("click",function(e){!u(e.target).closest("."+t).is("."+t)&&u("."+t).hasClass(s)&&f(t,s,c,"Click Outside to Close")},!0),u("."+t).on("click",".sm-close-btn",function(e){e.preventDefault(),f(t,s,c,"Close Button")}),u(document).keyup(function(e){27===e.keyCode&&f(t,s,c,"Escape Key")}),u("."+t).on("click","a:not( .sm-close-btn, .message-login )",function(){r("event","Popup","Click",g(t))})}function h(e){var t,n,s=(n="",t=u(t="."+e).attr("class").split(/\s+/),u.each(t,function(e,t){if(0<t.indexOf("message-region"))return n=t.substring(t.lastIndexOf("-")+1),!1}),n),o=g(e);u("."+e).is(":visible")&&r("event",s,"Show",o,{nonInteraction:1}),u("."+e).on("click",".message-login",function(){var e=u(this).attr("href");r("event",s,"Login Link",e)}),u("."+e).on("click","a:not( .sm-close-btn, .message-login )",function(){r("event",s,"Click",o)})}u(document).ready(function(){var e,t,n="wp-message-inserter-message-region-popup",s="sm-shown",o="check-session-message",i="wp-message-inserter-message",a=(parseInt(u("."+n).data("close-time-days"))||0)+(parseInt(u("."+n).data("close-time-hours"))||0)/24,c={gt:function(e,t){return t<=e},lt:function(e,t){return e<=t}},r=(e=d("count"),t=Math.floor((new Date).getTime()/1e3),d("count")?t>d("timecheck")&&(l("timecheck",t+3600,30),l("count",++e,30)):(l("count",1,30),l("timecheck",t+3600,30)),t=new URLSearchParams(window.location.search),e=null!==t.get("count")?parseInt(t.get("count")):e);0<u("."+o).length&&u("."+o).each(function(){var e=parseInt(u(this).data("session-count-to-check")),t=u(this).data("session-count-operator");c[t](r,e)&&(u(this).hasClass(n)&&d(s)||u(this).addClass("validated"))}),0<u("."+n).length&&m(n,a,s,"wp-message-inserter-message-popup-visible"),0<u("."+i+":not( ."+n+" )").length&&h(i+":not( ."+n+" )")})}(jQuery);