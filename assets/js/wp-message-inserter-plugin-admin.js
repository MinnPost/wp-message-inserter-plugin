;(function($) {
"use strict";

/**
 * Show fields associated with the selected message type
 *
 * @param {string} selector the div that holds the radio fields
 */
function showTypeField(selector) {
  var value = $('input[type="radio"]:checked', selector).val();
  $(".cmb2-message-type").hide();
  $(".cmb2-message-type-" + value).show();
}
/**
 * Whether we need the maximum screen width text field or not
 *
 * @param {string} selector the div that holds the checkboxes
 * @param {string} current the currently checked item
 */


function showHideMaximumScreen(selector, current) {
  if ("undefined" === typeof current) {
    current = $('input[type="checkbox"]:checked', selector);
  }

  if ($('input[type="checkbox"]', selector).is(":checked")) {
    $('input[type="checkbox"]:checked', selector).closest(".cmb-field-list").find(".cmb2-maximum-screen-width").hide();
  } else {
    $('input[type="checkbox"]', selector).closest(".cmb-field-list").find(".cmb2-maximum-screen-width").show();
  }
}
/**
 * Whether we need the custom maximum banner width fields
 *
 * @param {string} value the value of the maximum width <select> field
 */


function showHideMaximumBanner(value) {
  if ("custom" === value) {
    $(".cmb2-custom-maximum-banner-width").show();
  } else {
    $(".cmb2-custom-maximum-banner-width").hide();
  }
}
/**
 * Set up the message admin fields. This runs when a "screen size" gets added to the form
 */


function setupMessage() {
  var typeSelector = $(".cmb2-message-type-selector");
  var noMaxScreenSelector = $(".cmb2-no-maximum-screen-width");
  var maxBannerWidthSelector = ".cmb2-maximum-banner-width select";

  if (typeSelector.length > 0) {
    showTypeField(typeSelector);
    $('input[type="radio"]', typeSelector).on("change", function () {
      showTypeField(typeSelector);
    });
  }

  if (noMaxScreenSelector.length > 0) {
    showHideMaximumScreen(noMaxScreenSelector);
    $('input[type="checkbox"]', noMaxScreenSelector).on("change", function (el) {
      showHideMaximumScreen(noMaxScreenSelector, el);
    });
  }

  if ($(maxBannerWidthSelector).length > 0) {
    showHideMaximumBanner($(maxBannerWidthSelector).val());
    $(document).on("change", maxBannerWidthSelector, function () {
      showHideMaximumBanner($(this).val());
    });
  }

  $(".cmb-type-checkbox:hidden input:checkbox").prop("checked", false);
  $(".cmb-type-select:hidden option:selected").removeAttr("selected");
  $('.cmb-type-text:hidden input[type="text"]').val();
}
/**
 * When "add another screen size" runs, it adds a CMB2 row to the form. Set up the message form.
 */


$(document).on("cmb2_add_row", function () {
  setupMessage();
});
/**
 * When jQuery loads, remove some default WP fields and set up the message form
 */

$(document).ready(function () {
  $("#pageparentdiv label[for=parent_id]").parents("p").eq(0).remove();
  $("#pageparentdiv select#parent_id").remove();
  setupMessage();
});
/**
 * Make the various <select> fields into select2 fields
 */

if (jQuery.fn.select2) {
  $(".cmb2-insertable-message select").select2(); // Before a new group row is added, destroy Select2. We'll reinitialise after the row is added

  $(".cmb-repeatable-group").on("cmb2_add_group_row_start", function (event, instance) {
    var $table = $(document.getElementById($(instance).data("selector")));
    var $oldRow = $table.find(".cmb-repeatable-grouping").last();
    $oldRow.find(".cmb2_select").each(function () {
      $(this).select2("destroy");
    });
  }); // When a new group row is added, clear selection and initialise Select2

  $(".cmb-repeatable-group").on("cmb2_add_row", function (event, newRow) {
    $(newRow).find(".cmb2_select").each(function () {
      $("option:selected", this).removeAttr("selected");
      $(this).select2();
    }); // if it's a custom multiselect cmb2 field, make sure to clear the value because that appears to work differently

    $(newRow).find(".cmb2_multi_select").each(function () {
      $(this).val([]).change();
      $(this).select2("val", "");
    }); // Reinitialise the field we previously destroyed

    $(newRow).prev().find(".cmb2_select").each(function () {
      $(this).select2();
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2VzLmpzIl0sIm5hbWVzIjpbInNob3dUeXBlRmllbGQiLCJzZWxlY3RvciIsInZhbHVlIiwiJCIsInZhbCIsImhpZGUiLCJzaG93Iiwic2hvd0hpZGVNYXhpbXVtU2NyZWVuIiwiY3VycmVudCIsImlzIiwiY2xvc2VzdCIsImZpbmQiLCJzaG93SGlkZU1heGltdW1CYW5uZXIiLCJzZXR1cE1lc3NhZ2UiLCJ0eXBlU2VsZWN0b3IiLCJub01heFNjcmVlblNlbGVjdG9yIiwibWF4QmFubmVyV2lkdGhTZWxlY3RvciIsImxlbmd0aCIsIm9uIiwiZWwiLCJkb2N1bWVudCIsInByb3AiLCJyZW1vdmVBdHRyIiwicmVhZHkiLCJwYXJlbnRzIiwiZXEiLCJyZW1vdmUiLCJqUXVlcnkiLCJmbiIsInNlbGVjdDIiLCJldmVudCIsImluc3RhbmNlIiwiJHRhYmxlIiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRhIiwiJG9sZFJvdyIsImxhc3QiLCJlYWNoIiwibmV3Um93IiwiY2hhbmdlIiwicHJldiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7QUFLQSxTQUFTQSxhQUFULENBQXVCQyxRQUF2QixFQUFpQztBQUNoQyxNQUFNQyxLQUFLLEdBQUdDLENBQUMsQ0FBQyw2QkFBRCxFQUFnQ0YsUUFBaEMsQ0FBRCxDQUEyQ0csR0FBM0MsRUFBZDtBQUNBRCxFQUFBQSxDQUFDLENBQUMsb0JBQUQsQ0FBRCxDQUF3QkUsSUFBeEI7QUFDQUYsRUFBQUEsQ0FBQyxDQUFDLHdCQUF3QkQsS0FBekIsQ0FBRCxDQUFpQ0ksSUFBakM7QUFDQTtBQUVEOzs7Ozs7OztBQU1BLFNBQVNDLHFCQUFULENBQStCTixRQUEvQixFQUF5Q08sT0FBekMsRUFBa0Q7QUFDakQsTUFBSSxnQkFBZ0IsT0FBT0EsT0FBM0IsRUFBb0M7QUFDbkNBLElBQUFBLE9BQU8sR0FBR0wsQ0FBQyxDQUFDLGdDQUFELEVBQW1DRixRQUFuQyxDQUFYO0FBQ0E7O0FBQ0QsTUFBSUUsQ0FBQyxDQUFDLHdCQUFELEVB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QW5CLE1BQUFBLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUTBCLE9BQVI7QUFDQSxLQUxGLEVBRHFFLENBUXJFOztBQUNBMUIsSUFBQUEsQ0FBQyxDQUFDbUMsTUFBRCxDQUFELENBQ0UzQixJQURGLENBQ08sb0JBRFAsRUFFRTBCLElBRkYsQ0FFTyxZQUFXO0FBQ2hCbEMsTUFBQUEsQ0FBQyxDQUFDLElBQUQsQ0FBRCxDQUNFQyxHQURGLENBQ00sRUFETixFQUVFbUMsTUFGRjtBQUdBcEMsTUFBQUEsQ0FBQyxDQUFDLElBQUQsQ0FBRCxDQUFRMEIsT0FBUixDQUFnQixLQUFoQixFQUF1QixFQUF2QjtBQUNBLEtBUEYsRUFUcUUsQ0FrQnJFOztBQUNBMUIsSUFBQUEsQ0FBQyxDQUFDbUMsTUFBRCxDQUFELENBQ0VFLElBREYsR0FFRTdCLElBRkYsQ0FFTyxjQUZQLEVBR0UwQixJQUhGLENBR08sWUFBVztBQUNoQmxDLE1BQUFBLENBQUMsQ0FBQyxJQUFELENBQUQsQ0FBUTBCLE9BQVI7QUFDQSxLQUxGO0FBTUEsR0F6QkQ7QUEwQkEiLCJmaWxlIjoid3AtbWVzc2FnZS1pbnNlcnRlci1wbHVnaW4tYWRtaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNob3cgZmllbGRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VsZWN0ZWQgbWVzc2FnZSB0eXBlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIHRoZSBkaXYgdGhhdCBob2xkcyB0aGUgcmFkaW8gZmllbGRzXG4gKi9cbmZ1bmN0aW9uIHNob3dUeXBlRmllbGQoc2VsZWN0b3IpIHtcblx0Y29uc3QgdmFsdWUgPSAkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcsIHNlbGVjdG9yKS52YWwoKTtcblx0JChcIi5jbWIyLW1lc3NhZ2UtdHlwZVwiKS5oaWRlKCk7XG5cdCQoXCIuY21iMi1tZXNzYWdlLXR5cGUtXCIgKyB2YWx1ZSkuc2hvdygpO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgd2UgbmVlZCB0aGUgbWF4aW11bSBzY3JlZW4gd2lkdGggdGV4dCBmaWVsZCBvciBub3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgdGhlIGRpdiB0aGF0IGhvbGRzIHRoZSBjaGVja2JveGVzXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudCB0aGUgY3VycmVudGx5IGNoZWNrZWQgaXRlbVxuICovXG5mdW5jdGlvbiBzaG93SGlkZU1heGltdW1TY3JlZW4oc2VsZWN0b3IsIGN1cnJlbnQpIHtcblx0aWYgKFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiBjdXJyZW50KSB7XG5cdFx0Y3VycmVudCA9ICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IpO1xuXHR9XG5cdGlmICgkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3RvcikuaXMoXCI6Y2hlY2tlZFwiKSkge1xuXHRcdCQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IpXG5cdFx0XHQuY2xvc2VzdChcIi5jbWItZmllbGQtbGlzdFwiKVxuXHRcdFx0LmZpbmQoXCIuY21iMi1tYXhpbXVtLXNjcmVlbi13aWR0aFwiKVxuXHRcdFx0LmhpZGUoKTtcblx0fSBlbHNlIHtcblx0XHQkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3Rvcilcblx0XHRcdC5jbG9zZXN0KFwiLmNtYi1maWVsZC1saXN0XCIpXG5cdFx0XHQuZmluZChcIi5jbWIyLW1heGltdW0tc2NyZWVuLXdpZHRoXCIpXG5cdFx0XHQuc2hvdygpO1xuXHR9XG59XG5cbi8qKlxuICogV2hldGhlciB3ZSBuZWVkIHRoZSBjdXN0b20gbWF4aW11bSBiYW5uZXIgd2lkdGggZmllbGRzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgbWF4aW11bSB3aWR0aCA8c2VsZWN0PiBmaWVsZFxuICovXG5mdW5jdGlvbiBzaG93SGlkZU1heGltdW1CYW5uZXIodmFsdWUpIHtcblx0aWYgKFwiY3VzdG9tXCIgPT09IHZhbHVlKSB7XG5cdFx0JChcIi5jbWIyLWN1c3RvbS1tYXhpbXVtLWJhbm5lci13aWR0aFwiKS5zaG93KCk7XG5cdH0gZWxzZSB7XG5cdFx0JChcIi5jbWIyLWN1c3RvbS1tYXhpbXVtLWJhbm5lci13aWR0aFwiKS5oaWRlKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBTZXQgdXAgdGhlIG1lc3NhZ2UgYWRtaW4gZmllbGRzLiBUaGlzIHJ1bnMgd2hlbiBhIFwic2NyZWVuIHNpemVcIiBnZXRzIGFkZGVkIHRvIHRoZSBmb3JtXG4gKi9cbmZ1bmN0aW9uIHNldHVwTWVzc2FnZSgpIHtcblx0Y29uc3QgdHlwZVNlbGVjdG9yID0gJChcIi5jbWIyLW1lc3NhZ2UtdHlwZS1zZWxlY3RvclwiKTtcblx0Y29uc3Qgbm9NYXhTY3JlZW5TZWxlY3RvciA9ICQoXCIuY21iMi1uby1tYXhpbXVtLXNjcmVlbi13aWR0aFwiKTtcblx0Y29uc3QgbWF4QmFubmVyV2lkdGhTZWxlY3RvciA9IFwiLmNtYjItbWF4aW11bS1iYW5uZXItd2lkdGggc2VsZWN0XCI7XG5cdGlmICh0eXBlU2VsZWN0b3IubGVuZ3RoID4gMCkge1xuXHRcdHNob3dUeXBlRmllbGQodHlwZVNlbGVjdG9yKTtcblx0XHQkKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nLCB0eXBlU2VsZWN0b3IpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2hvd1R5cGVGaWVsZCh0eXBlU2VsZWN0b3IpO1xuXHRcdH0pO1xuXHR9XG5cdGlmIChub01heFNjcmVlblNlbGVjdG9yLmxlbmd0aCA+IDApIHtcblx0XHRzaG93SGlkZU1heGltdW1TY3JlZW4obm9NYXhTY3JlZW5TZWxlY3Rvcik7XG5cdFx0JCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJywgbm9NYXhTY3JlZW5TZWxlY3Rvcikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZWwpIHtcblx0XHRcdHNob3dIaWRlTWF4aW11bVNjcmVlbihub01heFNjcmVlblNlbGVjdG9yLCBlbCk7XG5cdFx0fSk7XG5cdH1cblx0aWYgKCQobWF4QmFubmVyV2lkdGhTZWxlY3RvcikubGVuZ3RoID4gMCkge1xuXHRcdHNob3dIaWRlTWF4aW11bUJhbm5lcigkKG1heEJhbm5lcldpZHRoU2VsZWN0b3IpLnZhbCgpKTtcblx0XHQkKGRvY3VtZW50KS5vbihcImNoYW5nZVwiLCBtYXhCYW5uZXJXaWR0aFNlbGVjdG9yLCBmdW5jdGlvbigpIHtcblx0XHRcdHNob3dIaWRlTWF4aW11bUJhbm5lcigkKHRoaXMpLnZhbCgpKTtcblx0XHR9KTtcblx0fVxuXHQkKFwiLmNtYi10eXBlLWNoZWNrYm94OmhpZGRlbiBpbnB1dDpjaGVja2JveFwiKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XG5cdCQoXCIuY21iLXR5cGUtc2VsZWN0OmhpZGRlbiBvcHRpb246c2VsZWN0ZWRcIikucmVtb3ZlQXR0cihcInNlbGVjdGVkXCIpO1xuXHQkKCcuY21iLXR5cGUtdGV4dDpoaWRkZW4gaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoKTtcbn1cblxuLyoqXG4gKiBXaGVuIFwiYWRkIGFub3RoZXIgc2NyZWVuIHNpemVcIiBydW5zLCBpdCBhZGRzIGEgQ01CMiByb3cgdG8gdGhlIGZvcm0uIFNldCB1cCB0aGUgbWVzc2FnZSBmb3JtLlxuICovXG4kKGRvY3VtZW50KS5vbihcImNtYjJfYWRkX3Jvd1wiLCBmdW5jdGlvbigpIHtcblx0c2V0dXBNZXNzYWdlKCk7XG59KTtcblxuLyoqXG4gKiBXaGVuIGpRdWVyeSBsb2FkcywgcmVtb3ZlIHNvbWUgZGVmYXVsdCBXUCBmaWVsZHMgYW5kIHNldCB1cCB0aGUgbWVzc2FnZSBmb3JtXG4gKi9cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHQkKFwiI3BhZ2VwYXJlbnRkaXYgbGFiZWxbZm9yPXBhcmVudF9pZF1cIilcblx0XHQucGFyZW50cyhcInBcIilcblx0XHQuZXEoMClcblx0XHQucmVtb3ZlKCk7XG5cdCQoXCIjcGFnZXBhcmVudGRpdiBzZWxlY3QjcGFyZW50X2lkXCIpLnJlbW92ZSgpO1xuXHRzZXR1cE1lc3NhZ2UoKTtcbn0pO1xuXG4vKipcbiAqIE1ha2UgdGhlIHZhcmlvdXMgPHNlbGVjdD4gZmllbGRzIGludG8gc2VsZWN0MiBmaWVsZHNcbiAqL1xuaWYgKGpRdWVyeS5mbi5zZWxlY3QyKSB7XG5cdCQoXCIuY21iMi1pbnNlcnRhYmxlLW1lc3NhZ2Ugc2VsZWN0XCIpLnNlbGVjdDIoKTtcblxuXHQvLyBCZWZvcmUgYSBuZXcgZ3JvdXAgcm93IGlzIGFkZGVkLCBkZXN0cm95IFNlbGVjdDIuIFdlJ2xsIHJlaW5pdGlhbGlzZSBhZnRlciB0aGUgcm93IGlzIGFkZGVkXG5cdCQoXCIuY21iLXJlcGVhdGFibGUtZ3JvdXBcIikub24oXCJjbWIyX2FkZF9ncm91cF9yb3dfc3RhcnRcIiwgZnVuY3Rpb24oXG5cdFx0ZXZlbnQsXG5cdFx0aW5zdGFuY2Vcblx0KSB7XG5cdFx0Y29uc3QgJHRhYmxlID0gJChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgkKGluc3RhbmNlKS5kYXRhKFwic2VsZWN0b3JcIikpKTtcblx0XHRjb25zdCAkb2xkUm93ID0gJHRhYmxlLmZpbmQoXCIuY21iLXJlcGVhdGFibGUtZ3JvdXBpbmdcIikubGFzdCgpO1xuXG5cdFx0JG9sZFJvdy5maW5kKFwiLmNtYjJfc2VsZWN0XCIpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHQkKHRoaXMpLnNlbGVjdDIoXCJkZXN0cm95XCIpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHQvLyBXaGVuIGEgbmV3IGdyb3VwIHJvdyBpcyBhZGRlZCwgY2xlYXIgc2VsZWN0aW9uIGFuZCBpbml0aWFsaXNlIFNlbGVjdDJcblx0JChcIi5jbWItcmVwZWF0YWJsZS1ncm91cFwiKS5vbihcImNtYjJfYWRkX3Jvd1wiLCBmdW5jdGlvbihldmVudCwgbmV3Um93KSB7XG5cdFx0JChuZXdSb3cpXG5cdFx0XHQuZmluZChcIi5jbWIyX3NlbGVjdFwiKVxuXHRcdFx0LmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoXCJvcHRpb246c2VsZWN0ZWRcIiwgdGhpcykucmVtb3ZlQXR0cihcInNlbGVjdGVkXCIpO1xuXHRcdFx0XHQkKHRoaXMpLnNlbGVjdDIoKTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gaWYgaXQncyBhIGN1c3RvbSBtdWx0aXNlbGVjdCBjbWIyIGZpZWxkLCBtYWtlIHN1cmUgdG8gY2xlYXIgdGhlIHZhbHVlIGJlY2F1c2UgdGhhdCBhcHBlYXJzIHRvIHdvcmsgZGlmZmVyZW50bHlcblx0XHQkKG5ld1Jvdylcblx0XHRcdC5maW5kKFwiLmNtYjJfbXVsdGlfc2VsZWN0XCIpXG5cdFx0XHQuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCh0aGlzKVxuXHRcdFx0XHRcdC52YWwoW10pXG5cdFx0XHRcdFx0LmNoYW5nZSgpO1xuXHRcdFx0XHQkKHRoaXMpLnNlbGVjdDIoXCJ2YWxcIiwgXCJcIik7XG5cdFx0XHR9KTtcblxuXHRcdC8vIFJlaW5pdGlhbGlzZSB0aGUgZmllbGQgd2UgcHJldmlvdXNseSBkZXN0cm95ZWRcblx0XHQkKG5ld1Jvdylcblx0XHRcdC5wcmV2KClcblx0XHRcdC5maW5kKFwiLmNtYjJfc2VsZWN0XCIpXG5cdFx0XHQuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0JCh0aGlzKS5zZWxlY3QyKCk7XG5cdFx0XHR9KTtcblx0fSk7XG59XG4iXX0=
}(jQuery));
