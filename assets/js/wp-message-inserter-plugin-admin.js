;(function($) {
"use strict";

/**
 * Show fields associated with the selected message type
 *
 * @param {string} selector the div that holds the radio fields
 */
function showTypeField(selector) {
  var value = $('input[type="radio"]:checked', selector).val();
  $('.cmb2-message-type').hide();
  $('.cmb2-message-type-' + value).show();
}
/**
 * Whether we need the maximum screen width text field or not
 *
 * @param {string} selector the div that holds the checkboxes
 * @param {string} current the currently checked item
 */


function showHideMaximumScreen(selector, current) {
  if ('undefined' === typeof current) {
    current = $('input[type="checkbox"]:checked', selector);
  }

  if ($('input[type="checkbox"]', selector).is(':checked')) {
    $('input[type="checkbox"]:checked', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').hide();
  } else {
    $('input[type="checkbox"]', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').show();
  }
}
/**
 * Whether we need the custom maximum banner width fields
 *
 * @param {string} value the value of the maximum width <select> field
 */


function showHideMaximumBanner(value) {
  if ('custom' === value) {
    $('.cmb2-custom-maximum-banner-width').show();
  } else {
    $('.cmb2-custom-maximum-banner-width').hide();
  }
}
/**
 * Set up the message admin fields. This runs when a "screen size" gets added to the form
 */


function setupMessage() {
  var typeSelector = $('.cmb2-message-type-selector');
  var noMaxScreenSelector = $('.cmb2-no-maximum-screen-width');
  var maxBannerWidthSelector = '.cmb2-maximum-banner-width select';

  if (typeSelector.length > 0) {
    showTypeField(typeSelector);
    $('input[type="radio"]', typeSelector).on('change', function () {
      showTypeField(typeSelector);
    });
  }

  if (noMaxScreenSelector.length > 0) {
    showHideMaximumScreen(noMaxScreenSelector);
    $('input[type="checkbox"]', noMaxScreenSelector).on('change', function (el) {
      showHideMaximumScreen(noMaxScreenSelector, el);
    });
  }

  if ($(maxBannerWidthSelector).length > 0) {
    showHideMaximumBanner($(maxBannerWidthSelector).val());
    $(document).on('change', maxBannerWidthSelector, function () {
      showHideMaximumBanner($(this).val());
    });
  }
}
/**
 * When "add another screen size" runs, it adds a CMB2 row to the form. Set up the message form.
 */


$(document).on('cmb2_add_row', function () {
  $(this).find('input[type="checkbox"]').prop('checked', false);
  setupMessage();
});
/**
 * When jQuery loads, remove some default WP fields and set up the message form
 */

$(document).ready(function () {
  $('#pageparentdiv label[for=parent_id]').parents('p').eq(0).remove();
  $('#pageparentdiv select#parent_id').remove();
  setupMessage();
});
/**
 * Make the various <select> fields into select2 fields
 */

if (jQuery.fn.select2) {
  $('.cmb2-insertable-message select').select2(); // Before a new group row is added, destroy Select2. We'll reinitialise after the row is added

  $('.cmb-repeatable-group').on('cmb2_add_group_row_start', function (event, instance) {
    var $table = $(document.getElementById($(instance).data('selector')));
    var $oldRow = $table.find('.cmb-repeatable-grouping').last();
    $oldRow.find('.cmb2_select').each(function () {
      $(this).select2('destroy');
    });
  }); // When a new group row is added, clear selection and initialise Select2

  $('.cmb-repeatable-group').on('cmb2_add_row', function (event, newRow) {
    $(newRow).find('.cmb2_select').each(function () {
      $('option:selected', this).removeAttr('selected');
      $(this).select2();
    }); // if it's a custom multiselect cmb2 field, make sure to clear the value because that appears to work differently

    $(newRow).find('.cmb2_multi_select').each(function () {
      $(this).val([]).change();
      $(this).select2('val', '');
    }); // Reinitialise the field we previously destroyed

    $(newRow).prev().find('.cmb2_select').each(function () {
      $(this).select2();
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2VzLmpzIl0sIm5hbWVzIjpbInNob3dUeXBlRmllbGQiLCJzZWxlY3RvciIsInZhbHVlIiwiJCIsInZhbCIsImhpZGUiLCJzaG93Iiwic2hvd0hpZGVNYXhpbXVtU2NyZWVuIiwiY3VycmVudCIsImlzIiwiY2xvc2VzdCIsImZpbmQiLCJzaG93SGlkZU1heGltdW1CYW5uZXIiLCJzZXR1cE1lc3NhZ2UiLCJ0eXBlU2VsZWN0b3IiLCJub01heFNjcmVlblNlbGVjdG9yIiwibWF4QmFubmVyV2lkdGhTZWxlY3RvciIsImxlbmd0aCIsIm9uIiwiZWwiLCJkb2N1bWVudCIsInByb3AiLCJyZWFkeSIsInBhcmVudHMiLCJlcSIsInJlbW92ZSIsImpRdWVyeSIsImZuIiwic2VsZWN0MiIsImV2ZW50IiwiaW5zdGFuY2UiLCIkdGFibGUiLCJnZXRFbGVtZW50QnlJZCIsImRhdGEiLCIkb2xkUm93IiwibGFzdCIsImVhY2giLCJuZXdSb3ciLCJyZW1vdmVBdHRyIiwiY2hhbmdlIiwicHJldiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7QUFLQSxTQUFTQSxhQUFULENBQXdCQyxRQUF4QixFQUFtQztBQUNsQyxNQUFNQyxLQUFLLEdBQUdDLENBQUMsQ0FBRSw2QkFBRixFQUFpQ0YsUUFBakMsQ0FBRCxDQUE2Q0csR0FBN0MsRUFBZDtBQUNBRCxFQUFBQSxDQUFDLENBQUUsb0JBQUYsQ0FBRCxDQUEwQkUsSUFBMUI7QUFDQUYsRUFBQUEsQ0FBQyxDQUFFLHdCQUF3QkQsS0FBMUIsQ0FBRCxDQUFtQ0ksSUFBbkM7QUFDQTtBQUVEOzs7Ozs7OztBQU1BLFNBQVNDLHFCQUFULENBQWdDTixRQUFoQyxFQUEwQ08sT0FBMUMsRUFBb0Q7QUFDbkQsTUFBSyxnQkFBZ0IsT0FBT0EsT0FBNUIsRUFBc0M7QUFDckNBLElBQUFBLE9BQU8sR0FBR0wsQ0FBQyxDQUFFLGdDQUFGLEVBQW9DRixRQUFwQyxDQUFYO0FBQ0E7O0FBQ0QsTUFBS0UsQ0FBQyxDQUFFLHdCQUFGLEVB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SEQsRUFEMEUsQ0FNMUU7O0FBQ0F6QixJQUFBQSxDQUFDLENBQUVrQyxNQUFGLENBQUQsQ0FBWTFCLElBQVosQ0FBa0Isb0JBQWxCLEVBQXlDeUIsSUFBekMsQ0FBK0MsWUFBVztBQUN6RGpDLE1BQUFBLENBQUMsQ0FBRSxJQUFGLENBQUQsQ0FBVUMsR0FBVixDQUFlLEVBQWYsRUFBb0JtQyxNQUFwQjtBQUNBcEMsTUFBQUEsQ0FBQyxDQUFFLElBQUYsQ0FBRCxDQUFVeUIsT0FBVixDQUFtQixLQUFuQixFQUEwQixFQUExQjtBQUNBLEtBSEQsRUFQMEUsQ0FZMUU7O0FBQ0F6QixJQUFBQSxDQUFDLENBQUVrQyxNQUFGLENBQUQsQ0FBWUcsSUFBWixHQUFtQjdCLElBQW5CLENBQXlCLGNBQXpCLEVBQTBDeUIsSUFBMUMsQ0FBZ0QsWUFBVztBQUMxRGpDLE1BQUFBLENBQUMsQ0FBRSxJQUFGLENBQUQsQ0FBVXlCLE9BQVY7QUFDQSxLQUZEO0FBR0EsR0FoQkQ7QUFpQkEiLCJmaWxlIjoid3AtbWVzc2FnZS1pbnNlcnRlci1wbHVnaW4tYWRtaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNob3cgZmllbGRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VsZWN0ZWQgbWVzc2FnZSB0eXBlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIHRoZSBkaXYgdGhhdCBob2xkcyB0aGUgcmFkaW8gZmllbGRzXG4gKi9cbmZ1bmN0aW9uIHNob3dUeXBlRmllbGQoIHNlbGVjdG9yICkge1xuXHRjb25zdCB2YWx1ZSA9ICQoICdpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcsIHNlbGVjdG9yICkudmFsKCk7XG5cdCQoICcuY21iMi1tZXNzYWdlLXR5cGUnICkuaGlkZSgpO1xuXHQkKCAnLmNtYjItbWVzc2FnZS10eXBlLScgKyB2YWx1ZSApLnNob3coKTtcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHdlIG5lZWQgdGhlIG1heGltdW0gc2NyZWVuIHdpZHRoIHRleHQgZmllbGQgb3Igbm90XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIHRoZSBkaXYgdGhhdCBob2xkcyB0aGUgY2hlY2tib3hlc1xuICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnQgdGhlIGN1cnJlbnRseSBjaGVja2VkIGl0ZW1cbiAqL1xuZnVuY3Rpb24gc2hvd0hpZGVNYXhpbXVtU2NyZWVuKCBzZWxlY3RvciwgY3VycmVudCApIHtcblx0aWYgKCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIGN1cnJlbnQgKSB7XG5cdFx0Y3VycmVudCA9ICQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcsIHNlbGVjdG9yICk7XG5cdH1cblx0aWYgKCAkKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJywgc2VsZWN0b3IgKS5pcyggJzpjaGVja2VkJyApICkge1xuXHRcdCQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcsIHNlbGVjdG9yICkuY2xvc2VzdCggJy5jbWItZmllbGQtbGlzdCcgKS5maW5kKCAnLmNtYjItbWF4aW11bS1zY3JlZW4td2lkdGgnICkuaGlkZSgpO1xuXHR9IGVsc2Uge1xuXHRcdCQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3RvciApLmNsb3Nlc3QoICcuY21iLWZpZWxkLWxpc3QnICkuZmluZCggJy5jbWIyLW1heGltdW0tc2NyZWVuLXdpZHRoJyApLnNob3coKTtcblx0fVxufVxuXG4vKipcbiAqIFdoZXRoZXIgd2UgbmVlZCB0aGUgY3VzdG9tIG1heGltdW0gYmFubmVyIHdpZHRoIGZpZWxkc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB0aGUgdmFsdWUgb2YgdGhlIG1heGltdW0gd2lkdGggPHNlbGVjdD4gZmllbGRcbiAqL1xuZnVuY3Rpb24gc2hvd0hpZGVNYXhpbXVtQmFubmVyKCB2YWx1ZSApIHtcblx0aWYgKCAnY3VzdG9tJyA9PT0gdmFsdWUgKSB7XG5cdFx0JCggJy5jbWIyLWN1c3RvbS1tYXhpbXVtLWJhbm5lci13aWR0aCcgKS5zaG93KCk7XG5cdH0gZWxzZSB7XG5cdFx0JCggJy5jbWIyLWN1c3RvbS1tYXhpbXVtLWJhbm5lci13aWR0aCcgKS5oaWRlKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBTZXQgdXAgdGhlIG1lc3NhZ2UgYWRtaW4gZmllbGRzLiBUaGlzIHJ1bnMgd2hlbiBhIFwic2NyZWVuIHNpemVcIiBnZXRzIGFkZGVkIHRvIHRoZSBmb3JtXG4gKi9cbmZ1bmN0aW9uIHNldHVwTWVzc2FnZSgpIHtcblx0Y29uc3QgdHlwZVNlbGVjdG9yID0gJCggJy5jbWIyLW1lc3NhZ2UtdHlwZS1zZWxlY3RvcicgKTtcblx0Y29uc3Qgbm9NYXhTY3JlZW5TZWxlY3RvciA9ICQoICcuY21iMi1uby1tYXhpbXVtLXNjcmVlbi13aWR0aCcgKTtcblx0Y29uc3QgbWF4QmFubmVyV2lkdGhTZWxlY3RvciA9ICcuY21iMi1tYXhpbXVtLWJhbm5lci13aWR0aCBzZWxlY3QnO1xuXHRpZiAoIHR5cGVTZWxlY3Rvci5sZW5ndGggPiAwICkge1xuXHRcdHNob3dUeXBlRmllbGQoIHR5cGVTZWxlY3RvciApO1xuXHRcdCQoICdpbnB1dFt0eXBlPVwicmFkaW9cIl0nLCB0eXBlU2VsZWN0b3IgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2hvd1R5cGVGaWVsZCggdHlwZVNlbGVjdG9yICk7XG5cdFx0fSApO1xuXHR9XG5cdGlmICggbm9NYXhTY3JlZW5TZWxlY3Rvci5sZW5ndGggPiAwICkge1xuXHRcdHNob3dIaWRlTWF4aW11bVNjcmVlbiggbm9NYXhTY3JlZW5TZWxlY3RvciApO1xuXHRcdCQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBub01heFNjcmVlblNlbGVjdG9yICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHRzaG93SGlkZU1heGltdW1TY3JlZW4oIG5vTWF4U2NyZWVuU2VsZWN0b3IsIGVsICk7XG5cdFx0fSApO1xuXHR9XG5cdGlmICggJCggbWF4QmFubmVyV2lkdGhTZWxlY3RvciApLmxlbmd0aCA+IDAgKSB7XG5cdFx0c2hvd0hpZGVNYXhpbXVtQmFubmVyKCAkKCBtYXhCYW5uZXJXaWR0aFNlbGVjdG9yICkudmFsKCkgKTtcblx0XHQkKCBkb2N1bWVudCApLm9uKCAnY2hhbmdlJywgbWF4QmFubmVyV2lkdGhTZWxlY3RvciwgZnVuY3Rpb24oKSB7XG5cdFx0XHRzaG93SGlkZU1heGltdW1CYW5uZXIoICQoIHRoaXMgKS52YWwoKSApO1xuXHRcdH0gKTtcblx0fVxufVxuXG4vKipcbiAqIFdoZW4gXCJhZGQgYW5vdGhlciBzY3JlZW4gc2l6ZVwiIHJ1bnMsIGl0IGFkZHMgYSBDTUIyIHJvdyB0byB0aGUgZm9ybS4gU2V0IHVwIHRoZSBtZXNzYWdlIGZvcm0uXG4gKi9cbiQoIGRvY3VtZW50ICkub24oICdjbWIyX2FkZF9yb3cnLCBmdW5jdGlvbigpIHtcblx0JCggdGhpcyApLmZpbmQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nICkucHJvcCggJ2NoZWNrZWQnLCBmYWxzZSApO1xuXHRzZXR1cE1lc3NhZ2UoKTtcbn0gKTtcblxuLyoqXG4gKiBXaGVuIGpRdWVyeSBsb2FkcywgcmVtb3ZlIHNvbWUgZGVmYXVsdCBXUCBmaWVsZHMgYW5kIHNldCB1cCB0aGUgbWVzc2FnZSBmb3JtXG4gKi9cbiQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuXHQkKCAnI3BhZ2VwYXJlbnRkaXYgbGFiZWxbZm9yPXBhcmVudF9pZF0nICkucGFyZW50cyggJ3AnICkuZXEoIDAgKS5yZW1vdmUoKTtcblx0JCggJyNwYWdlcGFyZW50ZGl2IHNlbGVjdCNwYXJlbnRfaWQnICkucmVtb3ZlKCk7XG5cdHNldHVwTWVzc2FnZSgpO1xufSApO1xuXG4vKipcbiAqIE1ha2UgdGhlIHZhcmlvdXMgPHNlbGVjdD4gZmllbGRzIGludG8gc2VsZWN0MiBmaWVsZHNcbiAqL1xuaWYgKCBqUXVlcnkuZm4uc2VsZWN0MiApIHtcblx0JCggJy5jbWIyLWluc2VydGFibGUtbWVzc2FnZSBzZWxlY3QnICkuc2VsZWN0MigpO1xuXG5cdC8vIEJlZm9yZSBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGRlc3Ryb3kgU2VsZWN0Mi4gV2UnbGwgcmVpbml0aWFsaXNlIGFmdGVyIHRoZSByb3cgaXMgYWRkZWRcblx0JCggJy5jbWItcmVwZWF0YWJsZS1ncm91cCcgKS5vbiggJ2NtYjJfYWRkX2dyb3VwX3Jvd19zdGFydCcsIGZ1bmN0aW9uKCBldmVudCwgaW5zdGFuY2UgKSB7XG5cdFx0Y29uc3QgJHRhYmxlID0gJCggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICQoIGluc3RhbmNlICkuZGF0YSggJ3NlbGVjdG9yJyApICkgKTtcblx0XHRjb25zdCAkb2xkUm93ID0gJHRhYmxlLmZpbmQoICcuY21iLXJlcGVhdGFibGUtZ3JvdXBpbmcnICkubGFzdCgpO1xuXG5cdFx0JG9sZFJvdy5maW5kKCAnLmNtYjJfc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoICdkZXN0cm95JyApO1xuXHRcdH0gKTtcblx0fSApO1xuXG5cdC8vIFdoZW4gYSBuZXcgZ3JvdXAgcm93IGlzIGFkZGVkLCBjbGVhciBzZWxlY3Rpb24gYW5kIGluaXRpYWxpc2UgU2VsZWN0MlxuXHQkKCAnLmNtYi1yZXBlYXRhYmxlLWdyb3VwJyApLm9uKCAnY21iMl9hZGRfcm93JywgZnVuY3Rpb24oIGV2ZW50LCBuZXdSb3cgKSB7XG5cdFx0JCggbmV3Um93ICkuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdCQoICdvcHRpb246c2VsZWN0ZWQnLCB0aGlzICkucmVtb3ZlQXR0ciggJ3NlbGVjdGVkJyApO1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoKTtcblx0XHR9ICk7XG5cblx0XHQvLyBpZiBpdCdzIGEgY3VzdG9tIG11bHRpc2VsZWN0IGNtYjIgZmllbGQsIG1ha2Ugc3VyZSB0byBjbGVhciB0aGUgdmFsdWUgYmVjYXVzZSB0aGF0IGFwcGVhcnMgdG8gd29yayBkaWZmZXJlbnRseVxuXHRcdCQoIG5ld1JvdyApLmZpbmQoICcuY21iMl9tdWx0aV9zZWxlY3QnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCB0aGlzICkudmFsKCBbXSApLmNoYW5nZSgpO1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoICd2YWwnLCAnJyApO1xuXHRcdH0gKTtcblxuXHRcdC8vIFJlaW5pdGlhbGlzZSB0aGUgZmllbGQgd2UgcHJldmlvdXNseSBkZXN0cm95ZWRcblx0XHQkKCBuZXdSb3cgKS5wcmV2KCkuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdCQoIHRoaXMgKS5zZWxlY3QyKCk7XG5cdFx0fSApO1xuXHR9ICk7XG59XG4iXX0=
}(jQuery));
