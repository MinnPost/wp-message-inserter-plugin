;(function($) {
"use strict";

/**
 * Show fields associated with the selected message type
 *
 * @param {string} selector the div that holds the radio fields
 */
function showTypeField(selector) {
  const value = $('input[type="radio"]:checked', selector).val();
  $('.cmb2-message-type').hide();
  $('.cmb2-message-type-' + value).show();
}

/**
 * Whether we need the maximum screen width text field or not
 *
 * @param {string} selector the div that holds the checkboxes
 * @param {string} current  the currently checked item
 */
function showHideMaximumScreen(selector, current) {
  if ('undefined' === typeof current) {
    current = $('input[type="checkbox"]:checked', selector);
  }
  if ($('input[type="checkbox"]', selector).is(':checked')) {
    $('input[type="checkbox"]:checked', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').hide();
  } else {
    $('input[type="checkbox"]', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').show();
  }
}

/**
 * Whether we need the custom maximum banner width fields
 *
 * @param {string} value the value of the maximum width <select> field
 */
function showHideMaximumBanner(value) {
  if ('custom' === value) {
    $('.cmb2-custom-maximum-banner-width').show();
  } else {
    $('.cmb2-custom-maximum-banner-width').hide();
  }
}

/**
 * Set up the message admin fields. This runs when a "screen size" gets added to the form
 */
function setupMessage() {
  const typeSelector = $('.cmb2-message-type-selector');
  const noMaxScreenSelector = $('.cmb2-no-maximum-screen-width');
  const maxBannerWidthSelector = '.cmb2-maximum-banner-width select';
  if (typeSelector.length > 0) {
    showTypeField(typeSelector);
    $('input[type="radio"]', typeSelector).on('change', function () {
      showTypeField(typeSelector);
    });
  }
  if (noMaxScreenSelector.length > 0) {
    showHideMaximumScreen(noMaxScreenSelector);
    $('input[type="checkbox"]', noMaxScreenSelector).on('change', function (el) {
      showHideMaximumScreen(noMaxScreenSelector, el);
    });
  }
  if ($(maxBannerWidthSelector).length > 0) {
    showHideMaximumBanner($(maxBannerWidthSelector).val());
    $(document).on('change', maxBannerWidthSelector, function () {
      showHideMaximumBanner($(this).val());
    });
  }
  $('.cmb-type-checkbox:hidden input:checkbox').prop('checked', false);
  $('.cmb-type-select:hidden option:selected').removeAttr('selected');
  $('.cmb-type-text:hidden input[type="text"]').val();
}

/**
 * When "add another screen size" runs, it adds a CMB2 row to the form. Set up the message form.
 */
$(document).on('cmb2_add_row', function () {
  setupMessage();
});

/**
 * When jQuery loads, remove some default WP fields and set up the message form
 */
$(document).ready(function () {
  $('#pageparentdiv label[for=parent_id]').parents('p').eq(0).remove();
  $('#pageparentdiv select#parent_id').remove();
  setupMessage();
});

/**
 * Make the various <select> fields into select2 fields
 */
if (jQuery.fn.select2) {
  $('.cmb2-insertable-message select').select2();

  // Before a new group row is added, destroy Select2. We'll reinitialise after the row is added
  $('.cmb-repeatable-group').on('cmb2_add_group_row_start', function (event, instance) {
    const $table = $(document.getElementById($(instance).data('selector')));
    const $oldRow = $table.find('.cmb-repeatable-grouping').last();
    $oldRow.find('.cmb2_select').each(function () {
      $(this).select2('destroy');
    });
  });

  // When a new group row is added, clear selection and initialise Select2
  $('.cmb-repeatable-group').on('cmb2_add_row', function (event, newRow) {
    $(newRow).find('.cmb2_select').each(function () {
      $('option:selected', this).removeAttr('selected');
      $(this).select2();
    });

    // if it's a custom multiselect cmb2 field, make sure to clear the value because that appears to work differently
    $(newRow).find('.cmb2_multi_select').each(function () {
      $(this).val([]).change();
      $(this).select2('val', '');
    });

    // Reinitialise the field we previously destroyed
    $(newRow).prev().find('.cmb2_select').each(function () {
      $(this).select2();
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2VzLmpzIl0sIm5hbWVzIjpbInNob3dUeXBlRmllbGQiLCJzZWxlY3RvciIsInZhbHVlIiwiJCIsInZhbCIsImhpZGUiLCJzaG93Iiwic2hvd0hpZGVNYXhpbXVtU2NyZWVuIiwiY3VycmVudCIsImlzIiwiY2xvc2VzdCIsImZpbmQiLCJzaG93SGlkZU1heGltdW1CYW5uZXIiLCJzZXR1cE1lc3NhZ2UiLCJ0eXBlU2VsZWN0b3IiLCJub01heFNjcmVlblNlbGVjdG9yIiwibWF4QmFubmVyV2lkdGhTZWxlY3RvciIsImxlbmd0aCIsIm9uIiwiZWwiLCJkb2N1bWVudCIsInByb3AiLCJyZW1vdmVBdHRyIiwicmVhZHkiLCJwYXJlbnRzIiwiZXEiLCJyZW1vdmUiLCJqUXVlcnkiLCJmbiIsInNlbGVjdDIiLCJldmVudCIsImluc3RhbmNlIiwiJHRhYmxlIiwiZ2V0RWxlbWVudEJ5SWQiLCJkYXRhIiwiJG9sZFJvdyIsImxhc3QiLCJlYWNoIiwibmV3Um93IiwiY2hhbmdlIiwicHJldiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0EsYUFBYSxDQUFDQyxRQUFRLEVBQUU7RUFDaEMsTUFBTUMsS0FBSyxHQUFHQyxDQUFDLENBQUMsNkJBQTZCLEVBQUVGLFFBQVEsQ0FBQyxDQUFDRyxHQUFHLEVBQUU7RUFDOURELENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDRSxJQUFJLEVBQUU7RUFDOUJGLENBQUMsQ0FBQyxxQkFBcUIsR0FBR0QsS0FBSyxDQUFDLENBQUNJLElBQUksRUFBRTtBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxxQkFBcUIsQ0FBQ04sUUFBUSxFQUFFTyxPQUFPLEVBQUU7RUFDakQsSUFBSSxXQUFXLEtBQUssT0FBT0EsT0FBTyxFQUFFO0lBQ25DQSxPQUFPLEdBQUdMLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRUYsUUFBUSxDQUFDO0VBQ3hEO0VBQ0EsSUFB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SUFBSSxDQUFDLENBQUMwQixPQUFPLEVBQUU7SUFDbEIsQ0FBQyxDQUFDOztJQUVIO0lBQ0ExQixDQUFDLENBQUNtQyxNQUFNLENBQUMsQ0FDUDNCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUMxQjBCLElBQUksQ0FBQyxZQUFZO01BQ2pCbEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUNtQyxNQUFNLEVBQUU7TUFDeEJwQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMwQixPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQztJQUMzQixDQUFDLENBQUM7O0lBRUg7SUFDQTFCLENBQUMsQ0FBQ21DLE1BQU0sQ0FBQyxDQUNQRSxJQUFJLEVBQUUsQ0FDTjdCLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FDcEIwQixJQUFJLENBQUMsWUFBWTtNQUNqQmxDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQzBCLE9BQU8sRUFBRTtJQUNsQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSCIsImZpbGUiOiJ3cC1tZXNzYWdlLWluc2VydGVyLXBsdWdpbi1hZG1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2hvdyBmaWVsZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZWxlY3RlZCBtZXNzYWdlIHR5cGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgdGhlIGRpdiB0aGF0IGhvbGRzIHRoZSByYWRpbyBmaWVsZHNcbiAqL1xuZnVuY3Rpb24gc2hvd1R5cGVGaWVsZChzZWxlY3Rvcikge1xuXHRjb25zdCB2YWx1ZSA9ICQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkJywgc2VsZWN0b3IpLnZhbCgpO1xuXHQkKCcuY21iMi1tZXNzYWdlLXR5cGUnKS5oaWRlKCk7XG5cdCQoJy5jbWIyLW1lc3NhZ2UtdHlwZS0nICsgdmFsdWUpLnNob3coKTtcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHdlIG5lZWQgdGhlIG1heGltdW0gc2NyZWVuIHdpZHRoIHRleHQgZmllbGQgb3Igbm90XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIHRoZSBkaXYgdGhhdCBob2xkcyB0aGUgY2hlY2tib3hlc1xuICogQHBhcmFtIHtzdHJpbmd9IGN1cnJlbnQgIHRoZSBjdXJyZW50bHkgY2hlY2tlZCBpdGVtXG4gKi9cbmZ1bmN0aW9uIHNob3dIaWRlTWF4aW11bVNjcmVlbihzZWxlY3RvciwgY3VycmVudCkge1xuXHRpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBjdXJyZW50KSB7XG5cdFx0Y3VycmVudCA9ICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IpO1xuXHR9XG5cdGlmICgkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3RvcikuaXMoJzpjaGVja2VkJykpIHtcblx0XHQkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcsIHNlbGVjdG9yKVxuXHRcdFx0LmNsb3Nlc3QoJy5jbWItZmllbGQtbGlzdCcpXG5cdFx0XHQuZmluZCgnLmNtYjItbWF4aW11bS1zY3JlZW4td2lkdGgnKVxuXHRcdFx0LmhpZGUoKTtcblx0fSBlbHNlIHtcblx0XHQkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3Rvcilcblx0XHRcdC5jbG9zZXN0KCcuY21iLWZpZWxkLWxpc3QnKVxuXHRcdFx0LmZpbmQoJy5jbWIyLW1heGltdW0tc2NyZWVuLXdpZHRoJylcblx0XHRcdC5zaG93KCk7XG5cdH1cbn1cblxuLyoqXG4gKiBXaGV0aGVyIHdlIG5lZWQgdGhlIGN1c3RvbSBtYXhpbXVtIGJhbm5lciB3aWR0aCBmaWVsZHNcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBtYXhpbXVtIHdpZHRoIDxzZWxlY3Q+IGZpZWxkXG4gKi9cbmZ1bmN0aW9uIHNob3dIaWRlTWF4aW11bUJhbm5lcih2YWx1ZSkge1xuXHRpZiAoJ2N1c3RvbScgPT09IHZhbHVlKSB7XG5cdFx0JCgnLmNtYjItY3VzdG9tLW1heGltdW0tYmFubmVyLXdpZHRoJykuc2hvdygpO1xuXHR9IGVsc2Uge1xuXHRcdCQoJy5jbWIyLWN1c3RvbS1tYXhpbXVtLWJhbm5lci13aWR0aCcpLmhpZGUoKTtcblx0fVxufVxuXG4vKipcbiAqIFNldCB1cCB0aGUgbWVzc2FnZSBhZG1pbiBmaWVsZHMuIFRoaXMgcnVucyB3aGVuIGEgXCJzY3JlZW4gc2l6ZVwiIGdldHMgYWRkZWQgdG8gdGhlIGZvcm1cbiAqL1xuZnVuY3Rpb24gc2V0dXBNZXNzYWdlKCkge1xuXHRjb25zdCB0eXBlU2VsZWN0b3IgPSAkKCcuY21iMi1tZXNzYWdlLXR5cGUtc2VsZWN0b3InKTtcblx0Y29uc3Qgbm9NYXhTY3JlZW5TZWxlY3RvciA9ICQoJy5jbWIyLW5vLW1heGltdW0tc2NyZWVuLXdpZHRoJyk7XG5cdGNvbnN0IG1heEJhbm5lcldpZHRoU2VsZWN0b3IgPSAnLmNtYjItbWF4aW11bS1iYW5uZXItd2lkdGggc2VsZWN0Jztcblx0aWYgKHR5cGVTZWxlY3Rvci5sZW5ndGggPiAwKSB7XG5cdFx0c2hvd1R5cGVGaWVsZCh0eXBlU2VsZWN0b3IpO1xuXHRcdCQoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScsIHR5cGVTZWxlY3Rvcikub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHNob3dUeXBlRmllbGQodHlwZVNlbGVjdG9yKTtcblx0XHR9KTtcblx0fVxuXHRpZiAobm9NYXhTY3JlZW5TZWxlY3Rvci5sZW5ndGggPiAwKSB7XG5cdFx0c2hvd0hpZGVNYXhpbXVtU2NyZWVuKG5vTWF4U2NyZWVuU2VsZWN0b3IpO1xuXHRcdCQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIG5vTWF4U2NyZWVuU2VsZWN0b3IpLm9uKFxuXHRcdFx0J2NoYW5nZScsXG5cdFx0XHRmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0c2hvd0hpZGVNYXhpbXVtU2NyZWVuKG5vTWF4U2NyZWVuU2VsZWN0b3IsIGVsKTtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cdGlmICgkKG1heEJhbm5lcldpZHRoU2VsZWN0b3IpLmxlbmd0aCA+IDApIHtcblx0XHRzaG93SGlkZU1heGltdW1CYW5uZXIoJChtYXhCYW5uZXJXaWR0aFNlbGVjdG9yKS52YWwoKSk7XG5cdFx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsIG1heEJhbm5lcldpZHRoU2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHNob3dIaWRlTWF4aW11bUJhbm5lcigkKHRoaXMpLnZhbCgpKTtcblx0XHR9KTtcblx0fVxuXHQkKCcuY21iLXR5cGUtY2hlY2tib3g6aGlkZGVuIGlucHV0OmNoZWNrYm94JykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcblx0JCgnLmNtYi10eXBlLXNlbGVjdDpoaWRkZW4gb3B0aW9uOnNlbGVjdGVkJykucmVtb3ZlQXR0cignc2VsZWN0ZWQnKTtcblx0JCgnLmNtYi10eXBlLXRleHQ6aGlkZGVuIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCk7XG59XG5cbi8qKlxuICogV2hlbiBcImFkZCBhbm90aGVyIHNjcmVlbiBzaXplXCIgcnVucywgaXQgYWRkcyBhIENNQjIgcm93IHRvIHRoZSBmb3JtLiBTZXQgdXAgdGhlIG1lc3NhZ2UgZm9ybS5cbiAqL1xuJChkb2N1bWVudCkub24oJ2NtYjJfYWRkX3JvdycsIGZ1bmN0aW9uICgpIHtcblx0c2V0dXBNZXNzYWdlKCk7XG59KTtcblxuLyoqXG4gKiBXaGVuIGpRdWVyeSBsb2FkcywgcmVtb3ZlIHNvbWUgZGVmYXVsdCBXUCBmaWVsZHMgYW5kIHNldCB1cCB0aGUgbWVzc2FnZSBmb3JtXG4gKi9cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblx0JCgnI3BhZ2VwYXJlbnRkaXYgbGFiZWxbZm9yPXBhcmVudF9pZF0nKS5wYXJlbnRzKCdwJykuZXEoMCkucmVtb3ZlKCk7XG5cdCQoJyNwYWdlcGFyZW50ZGl2IHNlbGVjdCNwYXJlbnRfaWQnKS5yZW1vdmUoKTtcblx0c2V0dXBNZXNzYWdlKCk7XG59KTtcblxuLyoqXG4gKiBNYWtlIHRoZSB2YXJpb3VzIDxzZWxlY3Q+IGZpZWxkcyBpbnRvIHNlbGVjdDIgZmllbGRzXG4gKi9cbmlmIChqUXVlcnkuZm4uc2VsZWN0Mikge1xuXHQkKCcuY21iMi1pbnNlcnRhYmxlLW1lc3NhZ2Ugc2VsZWN0Jykuc2VsZWN0MigpO1xuXG5cdC8vIEJlZm9yZSBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGRlc3Ryb3kgU2VsZWN0Mi4gV2UnbGwgcmVpbml0aWFsaXNlIGFmdGVyIHRoZSByb3cgaXMgYWRkZWRcblx0JCgnLmNtYi1yZXBlYXRhYmxlLWdyb3VwJykub24oXG5cdFx0J2NtYjJfYWRkX2dyb3VwX3Jvd19zdGFydCcsXG5cdFx0ZnVuY3Rpb24gKGV2ZW50LCBpbnN0YW5jZSkge1xuXHRcdFx0Y29uc3QgJHRhYmxlID0gJChcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJChpbnN0YW5jZSkuZGF0YSgnc2VsZWN0b3InKSlcblx0XHRcdCk7XG5cdFx0XHRjb25zdCAkb2xkUm93ID0gJHRhYmxlLmZpbmQoJy5jbWItcmVwZWF0YWJsZS1ncm91cGluZycpLmxhc3QoKTtcblxuXHRcdFx0JG9sZFJvdy5maW5kKCcuY21iMl9zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5zZWxlY3QyKCdkZXN0cm95Jyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdCk7XG5cblx0Ly8gV2hlbiBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGNsZWFyIHNlbGVjdGlvbiBhbmQgaW5pdGlhbGlzZSBTZWxlY3QyXG5cdCQoJy5jbWItcmVwZWF0YWJsZS1ncm91cCcpLm9uKCdjbWIyX2FkZF9yb3cnLCBmdW5jdGlvbiAoZXZlbnQsIG5ld1Jvdykge1xuXHRcdCQobmV3Um93KVxuXHRcdFx0LmZpbmQoJy5jbWIyX3NlbGVjdCcpXG5cdFx0XHQuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJ29wdGlvbjpzZWxlY3RlZCcsIHRoaXMpLnJlbW92ZUF0dHIoJ3NlbGVjdGVkJyk7XG5cdFx0XHRcdCQodGhpcykuc2VsZWN0MigpO1xuXHRcdFx0fSk7XG5cblx0XHQvLyBpZiBpdCdzIGEgY3VzdG9tIG11bHRpc2VsZWN0IGNtYjIgZmllbGQsIG1ha2Ugc3VyZSB0byBjbGVhciB0aGUgdmFsdWUgYmVjYXVzZSB0aGF0IGFwcGVhcnMgdG8gd29yayBkaWZmZXJlbnRseVxuXHRcdCQobmV3Um93KVxuXHRcdFx0LmZpbmQoJy5jbWIyX211bHRpX3NlbGVjdCcpXG5cdFx0XHQuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykudmFsKFtdKS5jaGFuZ2UoKTtcblx0XHRcdFx0JCh0aGlzKS5zZWxlY3QyKCd2YWwnLCAnJyk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIFJlaW5pdGlhbGlzZSB0aGUgZmllbGQgd2UgcHJldmlvdXNseSBkZXN0cm95ZWRcblx0XHQkKG5ld1Jvdylcblx0XHRcdC5wcmV2KClcblx0XHRcdC5maW5kKCcuY21iMl9zZWxlY3QnKVxuXHRcdFx0LmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHRoaXMpLnNlbGVjdDIoKTtcblx0XHRcdH0pO1xuXHR9KTtcbn1cbiJdfQ==
}(jQuery));
