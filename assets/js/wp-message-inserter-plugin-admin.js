"use strict";

(function ($) {
  function showTypeField(selector) {
    var value = $('input[type="radio"]:checked', selector).val();
    var parent = selector.parent();
    $('.cmb2-message-type').hide();
    $('.cmb2-message-type-' + value).show();
  }

  function showHideMaximum(selector, current) {
    if ('undefined' === typeof current) {
      var current = $('input[type="checkbox"]:checked', selector);
    }

    if ($('input[type="checkbox"]', selector).is(':checked')) {
      $('input[type="checkbox"]:checked', selector).closest('.cmb-field-list').find('.cmb2-maximum-width').hide();
    } else {
      $('input[type="checkbox"]', selector).closest('.cmb-field-list').find('.cmb2-maximum-width').show();
    }
  }

  function setupMessage() {
    var type_selector = $('.cmb2-message-type-selector');
    var no_max_selector = $('.cmb2-no-maximum-width');

    if (type_selector.length > 0) {
      showTypeField(type_selector);
      $('input[type="radio"]', type_selector).on('change', function (el) {
        showTypeField(type_selector);
      });
    }

    if (no_max_selector.length > 0) {
      showHideMaximum(no_max_selector);
      $('input[type="checkbox"]', no_max_selector).on('change', function (el) {
        showHideMaximum(no_max_selector, el);
      });
    }
  }

  $(document).ready(function () {
    $('#pageparentdiv label[for=parent_id]').parents('p').eq(0).remove();
    $('#pageparentdiv select#parent_id').remove();
    setupMessage();
  });
  $(document).on('cmb2_add_row', function (e) {
    $(this).find('input[type="checkbox"]').prop('checked', false);
    setupMessage();
  });

  if (jQuery.fn.select2) {
    $('.cmb2-insertable-message select').select2(); // Before a new group row is added, destroy Select2. We'll reinitialise after the row is added

    $('.cmb-repeatable-group').on('cmb2_add_group_row_start', function (event, instance) {
      var $table = $(document.getElementById($(instance).data('selector')));
      var $oldRow = $table.find('.cmb-repeatable-grouping').last();
      $oldRow.find('.cmb2_select').each(function () {
        $(this).select2('destroy');
      });
    }); // When a new group row is added, clear selection and initialise Select2

    $('.cmb-repeatable-group').on('cmb2_add_row', function (event, newRow) {
      $(newRow).find('.cmb2_select').each(function () {
        $('option:selected', this).removeAttr('selected');
        $(this).select2();
      }); // Reinitialise the field we previously destroyed

      $(newRow).prev().find('.cmb2_select').each(function () {
        $(this).select2();
      });
    });
  }
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2VzLmpzIl0sIm5hbWVzIjpbIiQiLCJzaG93VHlwZUZpZWxkIiwic2VsZWN0b3IiLCJ2YWx1ZSIsInZhbCIsInBhcmVudCIsImhpZGUiLCJzaG93Iiwic2hvd0hpZGVNYXhpbXVtIiwiY3VycmVudCIsImlzIiwiY2xvc2VzdCIsImZpbmQiLCJzZXR1cE1lc3NhZ2UiLCJ0eXBlX3NlbGVjdG9yIiwibm9fbWF4X3NlbGVjdG9yIiwibGVuZ3RoIiwib24iLCJlbCIsImRvY3VtZW50IiwicmVhZHkiLCJwYXJlbnRzIiwiZXEiLCJyZW1vdmUiLCJlIiwicHJvcCIsImpRdWVyeSIsImZuIiwic2VsZWN0MiIsImV2ZW50IiwiaW5zdGFuY2UiLCIkdGFibGUiLCJnZXRFbGVtZW50QnlJZCIsImRhdGEiLCIkb2xkUm93IiwibGFzdCIsImVhY2giLCJuZXdSb3ciLCJyZW1vdmVBdHRyIiwicHJldiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFFLFVBQVVBLENBQVYsRUFBYztBQUVmLFdBQVNDLGFBQVQsQ0FBd0JDLFFBQXhCLEVBQW1DO0FBQ2xDLFFBQUlDLEtBQUssR0FBSUgsQ0FBQyxDQUFFLDZCQUFGLEVBQWlDRSxRQUFqQyxDQUFELENBQTZDRSxHQUE3QyxFQUFiO0FBQ0EsUUFBSUMsTUFBTSxHQUFHSCxRQUFRLENBQUNHLE1BQVQsRUFBYjtBQUNBTCxJQUFBQSxDQUFDLENBQUUsb0JBQUYsQ0FBRCxDQUEwQk0sSUFBMUI7QUFDQU4sSUFBQUEsQ0FBQyxDQUFFLHdCQUF3QkcsS0FBMUIsQ0FBRCxDQUFtQ0ksSUFBbkM7QUFDQTs7QUFFRCxXQUFTQyxlQUFULENBQTBCTixRQUExQixFQUFvQ08sT0FBcEMsRUFBOEM7QUFDN0MsUUFBSyxnQkFBZ0IsT0FBT0EsT0FBNUIsRUFBc0M7QUFDckMsVUFBSUEsT0FBTyxHQUFHVCxDQUFDLENBQUUsZ0NBQUYsRUFBb0NFLFFBQXBDLENBQWY7QUFDQTs7QUFDRCxRQUFLRixDQUFDLENBQUUsd0JBQUYsRUFBNEJFLFFB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LE9BQVYsQ0FBbUIsU0FBbkI7QUFDQSxPQUZEO0FBR0EsS0FQRCxFQUp3QixDQWF4Qjs7QUFDQTVCLElBQUFBLENBQUMsQ0FBRSx1QkFBRixDQUFELENBQTZCaUIsRUFBN0IsQ0FBZ0MsY0FBaEMsRUFBZ0QsVUFBV1ksS0FBWCxFQUFrQlEsTUFBbEIsRUFBMkI7QUFDMUVyQyxNQUFBQSxDQUFDLENBQUVxQyxNQUFGLENBQUQsQ0FBWXpCLElBQVosQ0FBa0IsY0FBbEIsRUFBbUN3QixJQUFuQyxDQUF5QyxZQUFZO0FBQ3BEcEMsUUFBQUEsQ0FBQyxDQUFFLGlCQUFGLEVBQXFCLElBQXJCLENBQUQsQ0FBNkJzQyxVQUE3QixDQUF5QyxVQUF6QztBQUNBdEMsUUFBQUEsQ0FBQyxDQUFFLElBQUYsQ0FBRCxDQUFVNEIsT0FBVjtBQUNBLE9BSEQsRUFEMEUsQ0FNMUU7O0FBQ0E1QixNQUFBQSxDQUFDLENBQUVxQyxNQUFGLENBQUQsQ0FBWUUsSUFBWixHQUFtQjNCLElBQW5CLENBQXlCLGNBQXpCLEVBQTBDd0IsSUFBMUMsQ0FBZ0QsWUFBWTtBQUMzRHBDLFFBQUFBLENBQUMsQ0FBRSxJQUFGLENBQUQsQ0FBVTRCLE9BQVY7QUFDQSxPQUZEO0FBR0EsS0FWRDtBQVlBO0FBRUQsQ0E1RUQsRUE0RUdGLE1BNUVIIiwiZmlsZSI6IndwLW1lc3NhZ2UtaW5zZXJ0ZXItcGx1Z2luLWFkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCBmdW5jdGlvbiggJCApIHtcblxuXHRmdW5jdGlvbiBzaG93VHlwZUZpZWxkKCBzZWxlY3RvciApIHtcblx0XHR2YXIgdmFsdWUgID0gJCggJ2lucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkJywgc2VsZWN0b3IgKS52YWwoKTtcblx0XHR2YXIgcGFyZW50ID0gc2VsZWN0b3IucGFyZW50KCk7XG5cdFx0JCggJy5jbWIyLW1lc3NhZ2UtdHlwZScgKS5oaWRlKCk7XG5cdFx0JCggJy5jbWIyLW1lc3NhZ2UtdHlwZS0nICsgdmFsdWUgKS5zaG93KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBzaG93SGlkZU1heGltdW0oIHNlbGVjdG9yLCBjdXJyZW50ICkge1xuXHRcdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBjdXJyZW50ICkge1xuXHRcdFx0dmFyIGN1cnJlbnQgPSAkKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnLCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpZiAoICQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3RvciApLmlzKCAnOmNoZWNrZWQnICkgKSB7XG5cdFx0XHQkKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnLCBzZWxlY3RvciApLmNsb3Nlc3QoICcuY21iLWZpZWxkLWxpc3QnICkuZmluZCggJy5jbWIyLW1heGltdW0td2lkdGgnICkuaGlkZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJywgc2VsZWN0b3IgKS5jbG9zZXN0KCAnLmNtYi1maWVsZC1saXN0JyApLmZpbmQoICcuY21iMi1tYXhpbXVtLXdpZHRoJyApLnNob3coKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBzZXR1cE1lc3NhZ2UoKSB7XG5cdFx0dmFyIHR5cGVfc2VsZWN0b3IgICA9ICQoICcuY21iMi1tZXNzYWdlLXR5cGUtc2VsZWN0b3InICk7XG5cdFx0dmFyIG5vX21heF9zZWxlY3RvciA9ICQoICcuY21iMi1uby1tYXhpbXVtLXdpZHRoJyApO1xuXHRcdGlmICggdHlwZV9zZWxlY3Rvci5sZW5ndGggPiAwICkge1xuXHRcdFx0c2hvd1R5cGVGaWVsZCggdHlwZV9zZWxlY3RvciApO1xuXHRcdFx0JCggJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScsIHR5cGVfc2VsZWN0b3IgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdFx0c2hvd1R5cGVGaWVsZCggdHlwZV9zZWxlY3RvciApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICggbm9fbWF4X3NlbGVjdG9yLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRzaG93SGlkZU1heGltdW0oIG5vX21heF9zZWxlY3RvciApO1xuXHRcdFx0JCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIG5vX21heF9zZWxlY3RvciApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0XHRzaG93SGlkZU1heGltdW0oIG5vX21heF9zZWxlY3RvciwgZWwgKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdCQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuICBcdFx0JCggJyNwYWdlcGFyZW50ZGl2IGxhYmVsW2Zvcj1wYXJlbnRfaWRdJyApLnBhcmVudHMoICdwJyApLmVxKDApLnJlbW92ZSgpO1xuICBcdFx0JCggJyNwYWdlcGFyZW50ZGl2IHNlbGVjdCNwYXJlbnRfaWQnICkucmVtb3ZlKCk7XG5cdFx0c2V0dXBNZXNzYWdlKCk7XG5cdH0pO1xuXG5cdCQoIGRvY3VtZW50ICkub24oICdjbWIyX2FkZF9yb3cnLCBmdW5jdGlvbiggZSApIHtcblx0XHQkKCB0aGlzICkuZmluZCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScgKS5wcm9wKCAnY2hlY2tlZCcsIGZhbHNlICk7XG5cdFx0c2V0dXBNZXNzYWdlKCk7XG5cdH0pO1xuXG5cdGlmICggalF1ZXJ5LmZuLnNlbGVjdDIgKSB7XG5cdFx0JCggJy5jbWIyLWluc2VydGFibGUtbWVzc2FnZSBzZWxlY3QnICkuc2VsZWN0MigpO1xuXG5cdFx0Ly8gQmVmb3JlIGEgbmV3IGdyb3VwIHJvdyBpcyBhZGRlZCwgZGVzdHJveSBTZWxlY3QyLiBXZSdsbCByZWluaXRpYWxpc2UgYWZ0ZXIgdGhlIHJvdyBpcyBhZGRlZFxuXHRcdCQoICcuY21iLXJlcGVhdGFibGUtZ3JvdXAnICkub24oICdjbWIyX2FkZF9ncm91cF9yb3dfc3RhcnQnLCBmdW5jdGlvbiAoIGV2ZW50LCBpbnN0YW5jZSApIHtcblx0XHRcdHZhciAkdGFibGUgPSAkKCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJCggaW5zdGFuY2UgKS5kYXRhKCAnc2VsZWN0b3InICkgKSApO1xuXHRcdFx0dmFyICRvbGRSb3cgPSAkdGFibGUuZmluZCggJy5jbWItcmVwZWF0YWJsZS1ncm91cGluZycgKS5sYXN0KCk7XG5cblx0XHRcdCRvbGRSb3cuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5zZWxlY3QyKCAnZGVzdHJveScgKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gV2hlbiBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGNsZWFyIHNlbGVjdGlvbiBhbmQgaW5pdGlhbGlzZSBTZWxlY3QyXG5cdFx0JCggJy5jbWItcmVwZWF0YWJsZS1ncm91cCcgKS5vbignY21iMl9hZGRfcm93JywgZnVuY3Rpb24gKCBldmVudCwgbmV3Um93ICkge1xuXHRcdFx0JCggbmV3Um93ICkuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoICdvcHRpb246c2VsZWN0ZWQnLCB0aGlzICkucmVtb3ZlQXR0ciggJ3NlbGVjdGVkJyApO1xuXHRcdFx0XHQkKCB0aGlzICkuc2VsZWN0MigpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFJlaW5pdGlhbGlzZSB0aGUgZmllbGQgd2UgcHJldmlvdXNseSBkZXN0cm95ZWRcblx0XHRcdCQoIG5ld1JvdyApLnByZXYoKS5maW5kKCAnLmNtYjJfc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCggdGhpcyApLnNlbGVjdDIoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH1cblxufSkoalF1ZXJ5KTtcbiJdfQ==
