;(function($) {
"use strict";

/**
 * Show fields associated with the selected message type
 *
 * @param {string} selector the div that holds the radio fields
 */
function showTypeField(selector) {
  var value = $('input[type="radio"]:checked', selector).val();
  $('.cmb2-message-type').hide();
  $('.cmb2-message-type-' + value).show();
}
/**
 * Whether we need the maximum screen width text field or not
 *
 * @param {string} selector the div that holds the checkboxes
 * @param {string} current the currently checked item
 */


function showHideMaximumScreen(selector, current) {
  if ('undefined' === typeof current) {
    current = $('input[type="checkbox"]:checked', selector);
  }

  if ($('input[type="checkbox"]', selector).is(':checked')) {
    $('input[type="checkbox"]:checked', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').hide();
  } else {
    $('input[type="checkbox"]', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').show();
  }
}
/**
 * Whether we need the custom maximum banner width fields
 *
 * @param {string} value the value of the maximum width <select> field
 */


function showHideMaximumBanner(value) {
  if ('custom' === value) {
    $('.cmb2-custom-maximum-banner-width').show();
  } else {
    $('.cmb2-custom-maximum-banner-width').hide();
  }
}
/**
 * Set up the message admin fields. This runs when a "screen size" gets added to the form
 */


function setupMessage() {
  var typeSelector = $('.cmb2-message-type-selector');
  var noMaxScreenSelector = $('.cmb2-no-maximum-screen-width');
  var maxBannerWidthSelector = '.cmb2-maximum-banner-width select';

  if (typeSelector.length > 0) {
    showTypeField(typeSelector);
    $('input[type="radio"]', typeSelector).on('change', function () {
      showTypeField(typeSelector);
    });
  }

  if (noMaxScreenSelector.length > 0) {
    showHideMaximumScreen(noMaxScreenSelector);
    $('input[type="checkbox"]', noMaxScreenSelector).on('change', function (el) {
      showHideMaximumScreen(noMaxScreenSelector, el);
    });
  }

  if ($(maxBannerWidthSelector).length > 0) {
    showHideMaximumBanner($(maxBannerWidthSelector).val());
    $(document).on('change', maxBannerWidthSelector, function () {
      showHideMaximumBanner($(this).val());
    });
  }
}
/**
 * When "add another screen size" runs, it adds a CMB2 row to the form. Set up the message form.
 */


$(document).on('cmb2_add_row', function () {
  setupMessage();
});
/**
 * When jQuery loads, remove some default WP fields and set up the message form
 */

$(document).ready(function () {
  $('#pageparentdiv label[for=parent_id]').parents('p').eq(0).remove();
  $('#pageparentdiv select#parent_id').remove();
  setupMessage();
});
/**
 * Make the various <select> fields into select2 fields
 */

if (jQuery.fn.select2) {
  $('.cmb2-insertable-message select').select2(); // Before a new group row is added, destroy Select2. We'll reinitialise after the row is added

  $('.cmb-repeatable-group').on('cmb2_add_group_row_start', function (event, instance) {
    var $table = $(document.getElementById($(instance).data('selector')));
    var $oldRow = $table.find('.cmb-repeatable-grouping').last();
    $oldRow.find('.cmb2_select').each(function () {
      $(this).select2('destroy');
    });
  }); // When a new group row is added, clear selection and initialise Select2

  $('.cmb-repeatable-group').on('cmb2_add_row', function (event, newRow) {
    $(newRow).find('.cmb2_select').each(function () {
      $('option:selected', this).removeAttr('selected');
      $(this).select2();
    }); // if it's a custom multiselect cmb2 field, make sure to clear the value because that appears to work differently

    $(newRow).find('.cmb2_multi_select').each(function () {
      $(this).val([]).change();
      $(this).select2('val', '');
    }); // Reinitialise the field we previously destroyed

    $(newRow).prev().find('.cmb2_select').each(function () {
      $(this).select2();
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2VzLmpzIl0sIm5hbWVzIjpbInNob3dUeXBlRmllbGQiLCJzZWxlY3RvciIsInZhbHVlIiwiJCIsInZhbCIsImhpZGUiLCJzaG93Iiwic2hvd0hpZGVNYXhpbXVtU2NyZWVuIiwiY3VycmVudCIsImlzIiwiY2xvc2VzdCIsImZpbmQiLCJzaG93SGlkZU1heGltdW1CYW5uZXIiLCJzZXR1cE1lc3NhZ2UiLCJ0eXBlU2VsZWN0b3IiLCJub01heFNjcmVlblNlbGVjdG9yIiwibWF4QmFubmVyV2lkdGhTZWxlY3RvciIsImxlbmd0aCIsIm9uIiwiZWwiLCJkb2N1bWVudCIsInJlYWR5IiwicGFyZW50cyIsImVxIiwicmVtb3ZlIiwialF1ZXJ5IiwiZm4iLCJzZWxlY3QyIiwiZXZlbnQiLCJpbnN0YW5jZSIsIiR0YWJsZSIsImdldEVsZW1lbnRCeUlkIiwiZGF0YSIsIiRvbGRSb3ciLCJsYXN0IiwiZWFjaCIsIm5ld1JvdyIsInJlbW92ZUF0dHIiLCJjaGFuZ2UiLCJwcmV2Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7OztBQUtBLFNBQVNBLGFBQVQsQ0FBd0JDLFFBQXhCLEVBQW1DO0FBQ2xDLE1BQU1DLEtBQUssR0FBR0MsQ0FBQyxDQUFFLDZCQUFGLEVBQWlDRixRQUFqQyxDQUFELENBQTZDRyxHQUE3QyxFQUFkO0FBQ0FELEVBQUFBLENBQUMsQ0FBRSxvQkFBRixDQUFELENBQTBCRSxJQUExQjtBQUNBRixFQUFBQSxDQUFDLENBQUUsd0JBQXdCRCxLQUExQixDQUFELENBQW1DSSxJQUFuQztBQUNBO0FBRUQ7Ozs7Ozs7O0FBTUEsU0FBU0MscUJBQVQsQ0FBZ0NOLFFBQWhDLEVBQTBDTyxPQUExQyxFQUFvRDtBQUNuRCxNQUFLLGdCQUFnQixPQUFPQSxPQUE1QixFQUFzQztBQUNyQ0EsSUFBQUEsT0FBTyxHQUFHTCxDQUFDLENBQUUsZ0NBQUYsRUFBb0NGLFFBQXBDLENBQVg7QUFDQTs7QUFDRCxNQUFLRSxDQUFDLENBQUUsd0JBQUYsRUFBNEJGLFFB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O0FBQ3pEaEMsTUFBQUEsQ0FBQyxDQUFFLElBQUYsQ0FBRCxDQUFVQyxHQUFWLENBQWUsRUFBZixFQUFvQmtDLE1BQXBCO0FBQ0FuQyxNQUFBQSxDQUFDLENBQUUsSUFBRixDQUFELENBQVV3QixPQUFWLENBQW1CLEtBQW5CLEVBQTBCLEVBQTFCO0FBQ0EsS0FIRCxFQVAwRSxDQVkxRTs7QUFDQXhCLElBQUFBLENBQUMsQ0FBRWlDLE1BQUYsQ0FBRCxDQUFZRyxJQUFaLEdBQW1CNUIsSUFBbkIsQ0FBeUIsY0FBekIsRUFBMEN3QixJQUExQyxDQUFnRCxZQUFXO0FBQzFEaEMsTUFBQUEsQ0FBQyxDQUFFLElBQUYsQ0FBRCxDQUFVd0IsT0FBVjtBQUNBLEtBRkQ7QUFHQSxHQWhCRDtBQWlCQSIsImZpbGUiOiJ3cC1tZXNzYWdlLWluc2VydGVyLXBsdWdpbi1hZG1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2hvdyBmaWVsZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZWxlY3RlZCBtZXNzYWdlIHR5cGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgdGhlIGRpdiB0aGF0IGhvbGRzIHRoZSByYWRpbyBmaWVsZHNcbiAqL1xuZnVuY3Rpb24gc2hvd1R5cGVGaWVsZCggc2VsZWN0b3IgKSB7XG5cdGNvbnN0IHZhbHVlID0gJCggJ2lucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkJywgc2VsZWN0b3IgKS52YWwoKTtcblx0JCggJy5jbWIyLW1lc3NhZ2UtdHlwZScgKS5oaWRlKCk7XG5cdCQoICcuY21iMi1tZXNzYWdlLXR5cGUtJyArIHZhbHVlICkuc2hvdygpO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgd2UgbmVlZCB0aGUgbWF4aW11bSBzY3JlZW4gd2lkdGggdGV4dCBmaWVsZCBvciBub3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgdGhlIGRpdiB0aGF0IGhvbGRzIHRoZSBjaGVja2JveGVzXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudCB0aGUgY3VycmVudGx5IGNoZWNrZWQgaXRlbVxuICovXG5mdW5jdGlvbiBzaG93SGlkZU1heGltdW1TY3JlZW4oIHNlbGVjdG9yLCBjdXJyZW50ICkge1xuXHRpZiAoICd1bmRlZmluZWQnID09PSB0eXBlb2YgY3VycmVudCApIHtcblx0XHRjdXJyZW50ID0gJCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IgKTtcblx0fVxuXHRpZiAoICQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3RvciApLmlzKCAnOmNoZWNrZWQnICkgKSB7XG5cdFx0JCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IgKS5jbG9zZXN0KCAnLmNtYi1maWVsZC1saXN0JyApLmZpbmQoICcuY21iMi1tYXhpbXVtLXNjcmVlbi13aWR0aCcgKS5oaWRlKCk7XG5cdH0gZWxzZSB7XG5cdFx0JCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIHNlbGVjdG9yICkuY2xvc2VzdCggJy5jbWItZmllbGQtbGlzdCcgKS5maW5kKCAnLmNtYjItbWF4aW11bS1zY3JlZW4td2lkdGgnICkuc2hvdygpO1xuXHR9XG59XG5cbi8qKlxuICogV2hldGhlciB3ZSBuZWVkIHRoZSBjdXN0b20gbWF4aW11bSBiYW5uZXIgd2lkdGggZmllbGRzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIHRoZSB2YWx1ZSBvZiB0aGUgbWF4aW11bSB3aWR0aCA8c2VsZWN0PiBmaWVsZFxuICovXG5mdW5jdGlvbiBzaG93SGlkZU1heGltdW1CYW5uZXIoIHZhbHVlICkge1xuXHRpZiAoICdjdXN0b20nID09PSB2YWx1ZSApIHtcblx0XHQkKCAnLmNtYjItY3VzdG9tLW1heGltdW0tYmFubmVyLXdpZHRoJyApLnNob3coKTtcblx0fSBlbHNlIHtcblx0XHQkKCAnLmNtYjItY3VzdG9tLW1heGltdW0tYmFubmVyLXdpZHRoJyApLmhpZGUoKTtcblx0fVxufVxuXG4vKipcbiAqIFNldCB1cCB0aGUgbWVzc2FnZSBhZG1pbiBmaWVsZHMuIFRoaXMgcnVucyB3aGVuIGEgXCJzY3JlZW4gc2l6ZVwiIGdldHMgYWRkZWQgdG8gdGhlIGZvcm1cbiAqL1xuZnVuY3Rpb24gc2V0dXBNZXNzYWdlKCkge1xuXHRjb25zdCB0eXBlU2VsZWN0b3IgPSAkKCAnLmNtYjItbWVzc2FnZS10eXBlLXNlbGVjdG9yJyApO1xuXHRjb25zdCBub01heFNjcmVlblNlbGVjdG9yID0gJCggJy5jbWIyLW5vLW1heGltdW0tc2NyZWVuLXdpZHRoJyApO1xuXHRjb25zdCBtYXhCYW5uZXJXaWR0aFNlbGVjdG9yID0gJy5jbWIyLW1heGltdW0tYmFubmVyLXdpZHRoIHNlbGVjdCc7XG5cdGlmICggdHlwZVNlbGVjdG9yLmxlbmd0aCA+IDAgKSB7XG5cdFx0c2hvd1R5cGVGaWVsZCggdHlwZVNlbGVjdG9yICk7XG5cdFx0JCggJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScsIHR5cGVTZWxlY3RvciApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRzaG93VHlwZUZpZWxkKCB0eXBlU2VsZWN0b3IgKTtcblx0XHR9ICk7XG5cdH1cblx0aWYgKCBub01heFNjcmVlblNlbGVjdG9yLmxlbmd0aCA+IDAgKSB7XG5cdFx0c2hvd0hpZGVNYXhpbXVtU2NyZWVuKCBub01heFNjcmVlblNlbGVjdG9yICk7XG5cdFx0JCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIG5vTWF4U2NyZWVuU2VsZWN0b3IgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdHNob3dIaWRlTWF4aW11bVNjcmVlbiggbm9NYXhTY3JlZW5TZWxlY3RvciwgZWwgKTtcblx0XHR9ICk7XG5cdH1cblx0aWYgKCAkKCBtYXhCYW5uZXJXaWR0aFNlbGVjdG9yICkubGVuZ3RoID4gMCApIHtcblx0XHRzaG93SGlkZU1heGltdW1CYW5uZXIoICQoIG1heEJhbm5lcldpZHRoU2VsZWN0b3IgKS52YWwoKSApO1xuXHRcdCQoIGRvY3VtZW50ICkub24oICdjaGFuZ2UnLCBtYXhCYW5uZXJXaWR0aFNlbGVjdG9yLCBmdW5jdGlvbigpIHtcblx0XHRcdHNob3dIaWRlTWF4aW11bUJhbm5lciggJCggdGhpcyApLnZhbCgpICk7XG5cdFx0fSApO1xuXHR9XG59XG5cbi8qKlxuICogV2hlbiBcImFkZCBhbm90aGVyIHNjcmVlbiBzaXplXCIgcnVucywgaXQgYWRkcyBhIENNQjIgcm93IHRvIHRoZSBmb3JtLiBTZXQgdXAgdGhlIG1lc3NhZ2UgZm9ybS5cbiAqL1xuJCggZG9jdW1lbnQgKS5vbiggJ2NtYjJfYWRkX3JvdycsIGZ1bmN0aW9uKCkge1xuXHRzZXR1cE1lc3NhZ2UoKTtcbn0gKTtcblxuLyoqXG4gKiBXaGVuIGpRdWVyeSBsb2FkcywgcmVtb3ZlIHNvbWUgZGVmYXVsdCBXUCBmaWVsZHMgYW5kIHNldCB1cCB0aGUgbWVzc2FnZSBmb3JtXG4gKi9cbiQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuXHQkKCAnI3BhZ2VwYXJlbnRkaXYgbGFiZWxbZm9yPXBhcmVudF9pZF0nICkucGFyZW50cyggJ3AnICkuZXEoIDAgKS5yZW1vdmUoKTtcblx0JCggJyNwYWdlcGFyZW50ZGl2IHNlbGVjdCNwYXJlbnRfaWQnICkucmVtb3ZlKCk7XG5cdHNldHVwTWVzc2FnZSgpO1xufSApO1xuXG4vKipcbiAqIE1ha2UgdGhlIHZhcmlvdXMgPHNlbGVjdD4gZmllbGRzIGludG8gc2VsZWN0MiBmaWVsZHNcbiAqL1xuaWYgKCBqUXVlcnkuZm4uc2VsZWN0MiApIHtcblx0JCggJy5jbWIyLWluc2VydGFibGUtbWVzc2FnZSBzZWxlY3QnICkuc2VsZWN0MigpO1xuXG5cdC8vIEJlZm9yZSBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGRlc3Ryb3kgU2VsZWN0Mi4gV2UnbGwgcmVpbml0aWFsaXNlIGFmdGVyIHRoZSByb3cgaXMgYWRkZWRcblx0JCggJy5jbWItcmVwZWF0YWJsZS1ncm91cCcgKS5vbiggJ2NtYjJfYWRkX2dyb3VwX3Jvd19zdGFydCcsIGZ1bmN0aW9uKCBldmVudCwgaW5zdGFuY2UgKSB7XG5cdFx0Y29uc3QgJHRhYmxlID0gJCggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICQoIGluc3RhbmNlICkuZGF0YSggJ3NlbGVjdG9yJyApICkgKTtcblx0XHRjb25zdCAkb2xkUm93ID0gJHRhYmxlLmZpbmQoICcuY21iLXJlcGVhdGFibGUtZ3JvdXBpbmcnICkubGFzdCgpO1xuXG5cdFx0JG9sZFJvdy5maW5kKCAnLmNtYjJfc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoICdkZXN0cm95JyApO1xuXHRcdH0gKTtcblx0fSApO1xuXG5cdC8vIFdoZW4gYSBuZXcgZ3JvdXAgcm93IGlzIGFkZGVkLCBjbGVhciBzZWxlY3Rpb24gYW5kIGluaXRpYWxpc2UgU2VsZWN0MlxuXHQkKCAnLmNtYi1yZXBlYXRhYmxlLWdyb3VwJyApLm9uKCAnY21iMl9hZGRfcm93JywgZnVuY3Rpb24oIGV2ZW50LCBuZXdSb3cgKSB7XG5cdFx0JCggbmV3Um93ICkuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdCQoICdvcHRpb246c2VsZWN0ZWQnLCB0aGlzICkucmVtb3ZlQXR0ciggJ3NlbGVjdGVkJyApO1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoKTtcblx0XHR9ICk7XG5cblx0XHQvLyBpZiBpdCdzIGEgY3VzdG9tIG11bHRpc2VsZWN0IGNtYjIgZmllbGQsIG1ha2Ugc3VyZSB0byBjbGVhciB0aGUgdmFsdWUgYmVjYXVzZSB0aGF0IGFwcGVhcnMgdG8gd29yayBkaWZmZXJlbnRseVxuXHRcdCQoIG5ld1JvdyApLmZpbmQoICcuY21iMl9tdWx0aV9zZWxlY3QnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCB0aGlzICkudmFsKCBbXSApLmNoYW5nZSgpO1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoICd2YWwnLCAnJyApO1xuXHRcdH0gKTtcblxuXHRcdC8vIFJlaW5pdGlhbGlzZSB0aGUgZmllbGQgd2UgcHJldmlvdXNseSBkZXN0cm95ZWRcblx0XHQkKCBuZXdSb3cgKS5wcmV2KCkuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdCQoIHRoaXMgKS5zZWxlY3QyKCk7XG5cdFx0fSApO1xuXHR9ICk7XG59XG4iXX0=
}(jQuery));
