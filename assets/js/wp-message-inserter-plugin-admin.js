;(function($) {
"use strict";

/**
 * Show fields associated with the selected message type
 * @param {string} selector the div that holds the radio fields
 */
function showTypeField(selector) {
  var value = $('input[type="radio"]:checked', selector).val();
  var parent = selector.parent();
  $('.cmb2-message-type').hide();
  $('.cmb2-message-type-' + value).show();
}
/**
 * Whether we need the maximum screen width text field or not
 * @param {string} selector the div that holds the checkboxes
 * @param {string} current the currently checked item
 */


function showHideMaximumScreen(selector, current) {
  if ('undefined' === typeof current) {
    var current = $('input[type="checkbox"]:checked', selector);
  }

  if ($('input[type="checkbox"]', selector).is(':checked')) {
    $('input[type="checkbox"]:checked', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').hide();
  } else {
    $('input[type="checkbox"]', selector).closest('.cmb-field-list').find('.cmb2-maximum-screen-width').show();
  }
}
/**
 * Whether we need the custom maximum banner width fields
 * @param {string} value the value of the maximum width <select> field
 */


function showHideMaximumBanner(value) {
  if ('custom' === value) {
    $('.cmb2-custom-maximum-banner-width').show();
  } else {
    $('.cmb2-custom-maximum-banner-width').hide();
  }
}
/**
 * Set up the message admin fields. This runs when a "screen size" gets added to the form
 */


function setupMessage() {
  var type_selector = $('.cmb2-message-type-selector');
  var no_max_screen_selector = $('.cmb2-no-maximum-screen-width');
  var max_banner_width_selector = '.cmb2-maximum-banner-width select';

  if (type_selector.length > 0) {
    showTypeField(type_selector);
    $('input[type="radio"]', type_selector).on('change', function (el) {
      showTypeField(type_selector);
    });
  }

  if (no_max_screen_selector.length > 0) {
    showHideMaximumScreen(no_max_screen_selector);
    $('input[type="checkbox"]', no_max_screen_selector).on('change', function (el) {
      showHideMaximumScreen(no_max_screen_selector, el);
    });
  }

  if ($(max_banner_width_selector).length > 0) {
    showHideMaximumBanner($(max_banner_width_selector).val());
    $(document).on('change', max_banner_width_selector, function () {
      showHideMaximumBanner($(this).val());
    });
  }
}
/**
 * When "add another screen size" runs, it adds a CMB2 row to the form. Set up the message form.
 */


$(document).on('cmb2_add_row', function (e) {
  $(this).find('input[type="checkbox"]').prop('checked', false);
  setupMessage();
});
/**
 * When jQuery loads, remove some default WP fields and set up the message form
 */

$(document).ready(function () {
  $('#pageparentdiv label[for=parent_id]').parents('p').eq(0).remove();
  $('#pageparentdiv select#parent_id').remove();
  setupMessage();
});
/**
 * Make the various <select> fields into select2 fields
 */

if (jQuery.fn.select2) {
  $('.cmb2-insertable-message select').select2(); // Before a new group row is added, destroy Select2. We'll reinitialise after the row is added

  $('.cmb-repeatable-group').on('cmb2_add_group_row_start', function (event, instance) {
    var $table = $(document.getElementById($(instance).data('selector')));
    var $oldRow = $table.find('.cmb-repeatable-grouping').last();
    $oldRow.find('.cmb2_select').each(function () {
      $(this).select2('destroy');
    });
  }); // When a new group row is added, clear selection and initialise Select2

  $('.cmb-repeatable-group').on('cmb2_add_row', function (event, newRow) {
    $(newRow).find('.cmb2_select').each(function () {
      $('option:selected', this).removeAttr('selected');
      $(this).select2();
    }); // Reinitialise the field we previously destroyed

    $(newRow).prev().find('.cmb2_select').each(function () {
      $(this).select2();
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lc3NhZ2VzLmpzIl0sIm5hbWVzIjpbInNob3dUeXBlRmllbGQiLCJzZWxlY3RvciIsInZhbHVlIiwiJCIsInZhbCIsInBhcmVudCIsImhpZGUiLCJzaG93Iiwic2hvd0hpZGVNYXhpbXVtU2NyZWVuIiwiY3VycmVudCIsImlzIiwiY2xvc2VzdCIsImZpbmQiLCJzaG93SGlkZU1heGltdW1CYW5uZXIiLCJzZXR1cE1lc3NhZ2UiLCJ0eXBlX3NlbGVjdG9yIiwibm9fbWF4X3NjcmVlbl9zZWxlY3RvciIsIm1heF9iYW5uZXJfd2lkdGhfc2VsZWN0b3IiLCJsZW5ndGgiLCJvbiIsImVsIiwiZG9jdW1lbnQiLCJlIiwicHJvcCIsInJlYWR5IiwicGFyZW50cyIsImVxIiwicmVtb3ZlIiwialF1ZXJ5IiwiZm4iLCJzZWxlY3QyIiwiZXZlbnQiLCJpbnN0YW5jZSIsIiR0YWJsZSIsImdldEVsZW1lbnRCeUlkIiwiZGF0YSIsIiRvbGRSb3ciLCJsYXN0IiwiZWFjaCIsIm5ld1JvdyIsInJlbW92ZUF0dHIiLCJwcmV2Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBSUEsU0FBU0EsYUFBVCxDQUF3QkMsUUFBeEIsRUFBbUM7QUFDbEMsTUFBSUMsS0FBSyxHQUFJQyxDQUFDLENBQUUsNkJBQUYsRUFBaUNGLFFBQWpDLENBQUQsQ0FBNkNHLEdBQTdDLEVBQWI7QUFDQSxNQUFJQyxNQUFNLEdBQUdKLFFBQVEsQ0FBQ0ksTUFBVCxFQUFiO0FBQ0FGLEVBQUFBLENBQUMsQ0FBRSxvQkFBRixDQUFELENBQTBCRyxJQUExQjtBQUNBSCxFQUFBQSxDQUFDLENBQUUsd0JBQXdCRCxLQUExQixDQUFELENBQW1DSyxJQUFuQztBQUNBO0FBRUQ7Ozs7Ozs7QUFLQSxTQUFTQyxxQkFBVCxDQUFnQ1AsUUFBaEMsRUFBMENRLE9BQTFDLEVBQW9EO0FBQ25ELE1BQUssZ0JBQWdCLE9BQU9BLE9BQTVCLEVBQXNDO0FBQ3JDLFFBQUlBLE9BQU8sR0FBR04sQ0FBQyxDQUFFLGdDQUFGLEVB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cUMsVUFBN0IsQ0FBeUMsVUFBekM7QUFDQXJDLE1BQUFBLENBQUMsQ0FBRSxJQUFGLENBQUQsQ0FBVTJCLE9BQVY7QUFDQSxLQUhELEVBRDBFLENBTTFFOztBQUNBM0IsSUFBQUEsQ0FBQyxDQUFFb0MsTUFBRixDQUFELENBQVlFLElBQVosR0FBbUI3QixJQUFuQixDQUF5QixjQUF6QixFQUEwQzBCLElBQTFDLENBQWdELFlBQVk7QUFDM0RuQyxNQUFBQSxDQUFDLENBQUUsSUFBRixDQUFELENBQVUyQixPQUFWO0FBQ0EsS0FGRDtBQUdBLEdBVkQ7QUFZQSIsImZpbGUiOiJ3cC1tZXNzYWdlLWluc2VydGVyLXBsdWdpbi1hZG1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2hvdyBmaWVsZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzZWxlY3RlZCBtZXNzYWdlIHR5cGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciB0aGUgZGl2IHRoYXQgaG9sZHMgdGhlIHJhZGlvIGZpZWxkc1xuICovXG5mdW5jdGlvbiBzaG93VHlwZUZpZWxkKCBzZWxlY3RvciApIHtcblx0dmFyIHZhbHVlICA9ICQoICdpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCcsIHNlbGVjdG9yICkudmFsKCk7XG5cdHZhciBwYXJlbnQgPSBzZWxlY3Rvci5wYXJlbnQoKTtcblx0JCggJy5jbWIyLW1lc3NhZ2UtdHlwZScgKS5oaWRlKCk7XG5cdCQoICcuY21iMi1tZXNzYWdlLXR5cGUtJyArIHZhbHVlICkuc2hvdygpO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgd2UgbmVlZCB0aGUgbWF4aW11bSBzY3JlZW4gd2lkdGggdGV4dCBmaWVsZCBvciBub3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciB0aGUgZGl2IHRoYXQgaG9sZHMgdGhlIGNoZWNrYm94ZXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW50IHRoZSBjdXJyZW50bHkgY2hlY2tlZCBpdGVtXG4gKi9cbmZ1bmN0aW9uIHNob3dIaWRlTWF4aW11bVNjcmVlbiggc2VsZWN0b3IsIGN1cnJlbnQgKSB7XG5cdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBjdXJyZW50ICkge1xuXHRcdHZhciBjdXJyZW50ID0gJCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IgKTtcblx0fVxuXHRpZiAoICQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBzZWxlY3RvciApLmlzKCAnOmNoZWNrZWQnICkgKSB7XG5cdFx0JCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJywgc2VsZWN0b3IgKS5jbG9zZXN0KCAnLmNtYi1maWVsZC1saXN0JyApLmZpbmQoICcuY21iMi1tYXhpbXVtLXNjcmVlbi13aWR0aCcgKS5oaWRlKCk7XG5cdH0gZWxzZSB7XG5cdFx0JCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIHNlbGVjdG9yICkuY2xvc2VzdCggJy5jbWItZmllbGQtbGlzdCcgKS5maW5kKCAnLmNtYjItbWF4aW11bS1zY3JlZW4td2lkdGgnICkuc2hvdygpO1xuXHR9XG59XG5cbi8qKlxuICogV2hldGhlciB3ZSBuZWVkIHRoZSBjdXN0b20gbWF4aW11bSBiYW5uZXIgd2lkdGggZmllbGRzXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBtYXhpbXVtIHdpZHRoIDxzZWxlY3Q+IGZpZWxkXG4gKi9cbmZ1bmN0aW9uIHNob3dIaWRlTWF4aW11bUJhbm5lciggdmFsdWUgKSB7XG5cdGlmICggJ2N1c3RvbScgPT09IHZhbHVlICkge1xuXHRcdCQoICcuY21iMi1jdXN0b20tbWF4aW11bS1iYW5uZXItd2lkdGgnICkuc2hvdygpO1xuXHR9IGVsc2Uge1xuXHRcdCQoICcuY21iMi1jdXN0b20tbWF4aW11bS1iYW5uZXItd2lkdGgnICkuaGlkZSgpO1xuXHR9XG59XG5cbi8qKlxuICogU2V0IHVwIHRoZSBtZXNzYWdlIGFkbWluIGZpZWxkcy4gVGhpcyBydW5zIHdoZW4gYSBcInNjcmVlbiBzaXplXCIgZ2V0cyBhZGRlZCB0byB0aGUgZm9ybVxuICovXG5mdW5jdGlvbiBzZXR1cE1lc3NhZ2UoKSB7XG5cdHZhciB0eXBlX3NlbGVjdG9yICAgICAgICAgICAgID0gJCggJy5jbWIyLW1lc3NhZ2UtdHlwZS1zZWxlY3RvcicgKTtcblx0dmFyIG5vX21heF9zY3JlZW5fc2VsZWN0b3IgICAgPSAkKCAnLmNtYjItbm8tbWF4aW11bS1zY3JlZW4td2lkdGgnICk7XG5cdHZhciBtYXhfYmFubmVyX3dpZHRoX3NlbGVjdG9yID0gJy5jbWIyLW1heGltdW0tYmFubmVyLXdpZHRoIHNlbGVjdCc7XG5cdGlmICggdHlwZV9zZWxlY3Rvci5sZW5ndGggPiAwICkge1xuXHRcdHNob3dUeXBlRmllbGQoIHR5cGVfc2VsZWN0b3IgKTtcblx0XHQkKCAnaW5wdXRbdHlwZT1cInJhZGlvXCJdJywgdHlwZV9zZWxlY3RvciApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0c2hvd1R5cGVGaWVsZCggdHlwZV9zZWxlY3RvciApO1xuXHRcdH0pO1xuXHR9XG5cdGlmICggbm9fbWF4X3NjcmVlbl9zZWxlY3Rvci5sZW5ndGggPiAwICkge1xuXHRcdHNob3dIaWRlTWF4aW11bVNjcmVlbiggbm9fbWF4X3NjcmVlbl9zZWxlY3RvciApO1xuXHRcdCQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nLCBub19tYXhfc2NyZWVuX3NlbGVjdG9yICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHRzaG93SGlkZU1heGltdW1TY3JlZW4oIG5vX21heF9zY3JlZW5fc2VsZWN0b3IsIGVsICk7XG5cdFx0fSk7XG5cdH1cblx0aWYgKCAkKCBtYXhfYmFubmVyX3dpZHRoX3NlbGVjdG9yICkubGVuZ3RoID4gMCApIHtcblx0XHRzaG93SGlkZU1heGltdW1CYW5uZXIoICQoIG1heF9iYW5uZXJfd2lkdGhfc2VsZWN0b3IgKS52YWwoKSApO1xuXHRcdCQoIGRvY3VtZW50ICkub24oICdjaGFuZ2UnLCBtYXhfYmFubmVyX3dpZHRoX3NlbGVjdG9yLCBmdW5jdGlvbigpIHtcblx0XHRcdHNob3dIaWRlTWF4aW11bUJhbm5lciggJCggdGhpcyApLnZhbCgpICk7XG5cdFx0fSk7XG5cdH1cbn1cblxuLyoqXG4gKiBXaGVuIFwiYWRkIGFub3RoZXIgc2NyZWVuIHNpemVcIiBydW5zLCBpdCBhZGRzIGEgQ01CMiByb3cgdG8gdGhlIGZvcm0uIFNldCB1cCB0aGUgbWVzc2FnZSBmb3JtLlxuICovXG4kKCBkb2N1bWVudCApLm9uKCAnY21iMl9hZGRfcm93JywgZnVuY3Rpb24oIGUgKSB7XG5cdCQoIHRoaXMgKS5maW5kKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyApLnByb3AoICdjaGVja2VkJywgZmFsc2UgKTtcblx0c2V0dXBNZXNzYWdlKCk7XG59KTtcblxuLyoqXG4gKiBXaGVuIGpRdWVyeSBsb2FkcywgcmVtb3ZlIHNvbWUgZGVmYXVsdCBXUCBmaWVsZHMgYW5kIHNldCB1cCB0aGUgbWVzc2FnZSBmb3JtXG4gKi9cbiQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuXHQkKCAnI3BhZ2VwYXJlbnRkaXYgbGFiZWxbZm9yPXBhcmVudF9pZF0nICkucGFyZW50cyggJ3AnICkuZXEoMCkucmVtb3ZlKCk7XG5cdCQoICcjcGFnZXBhcmVudGRpdiBzZWxlY3QjcGFyZW50X2lkJyApLnJlbW92ZSgpO1xuXHRzZXR1cE1lc3NhZ2UoKTtcbn0pO1xuXG4vKipcbiAqIE1ha2UgdGhlIHZhcmlvdXMgPHNlbGVjdD4gZmllbGRzIGludG8gc2VsZWN0MiBmaWVsZHNcbiAqL1xuaWYgKCBqUXVlcnkuZm4uc2VsZWN0MiApIHtcblx0JCggJy5jbWIyLWluc2VydGFibGUtbWVzc2FnZSBzZWxlY3QnICkuc2VsZWN0MigpO1xuXG5cdC8vIEJlZm9yZSBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGRlc3Ryb3kgU2VsZWN0Mi4gV2UnbGwgcmVpbml0aWFsaXNlIGFmdGVyIHRoZSByb3cgaXMgYWRkZWRcblx0JCggJy5jbWItcmVwZWF0YWJsZS1ncm91cCcgKS5vbiggJ2NtYjJfYWRkX2dyb3VwX3Jvd19zdGFydCcsIGZ1bmN0aW9uICggZXZlbnQsIGluc3RhbmNlICkge1xuXHRcdHZhciAkdGFibGUgPSAkKCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJCggaW5zdGFuY2UgKS5kYXRhKCAnc2VsZWN0b3InICkgKSApO1xuXHRcdHZhciAkb2xkUm93ID0gJHRhYmxlLmZpbmQoICcuY21iLXJlcGVhdGFibGUtZ3JvdXBpbmcnICkubGFzdCgpO1xuXG5cdFx0JG9sZFJvdy5maW5kKCAnLmNtYjJfc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uICgpIHtcblx0XHRcdCQoIHRoaXMgKS5zZWxlY3QyKCAnZGVzdHJveScgKTtcblx0XHR9KTtcblx0fSk7XG5cblx0Ly8gV2hlbiBhIG5ldyBncm91cCByb3cgaXMgYWRkZWQsIGNsZWFyIHNlbGVjdGlvbiBhbmQgaW5pdGlhbGlzZSBTZWxlY3QyXG5cdCQoICcuY21iLXJlcGVhdGFibGUtZ3JvdXAnICkub24oJ2NtYjJfYWRkX3JvdycsIGZ1bmN0aW9uICggZXZlbnQsIG5ld1JvdyApIHtcblx0XHQkKCBuZXdSb3cgKS5maW5kKCAnLmNtYjJfc2VsZWN0JyApLmVhY2goIGZ1bmN0aW9uICgpIHtcblx0XHRcdCQoICdvcHRpb246c2VsZWN0ZWQnLCB0aGlzICkucmVtb3ZlQXR0ciggJ3NlbGVjdGVkJyApO1xuXHRcdFx0JCggdGhpcyApLnNlbGVjdDIoKTtcblx0XHR9KTtcblxuXHRcdC8vIFJlaW5pdGlhbGlzZSB0aGUgZmllbGQgd2UgcHJldmlvdXNseSBkZXN0cm95ZWRcblx0XHQkKCBuZXdSb3cgKS5wcmV2KCkuZmluZCggJy5jbWIyX3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCB0aGlzICkuc2VsZWN0MigpO1xuXHRcdH0pO1xuXHR9KTtcblxufVxuIl19
}(jQuery));
